(this["webpackJsonpfor-the-record"]=this["webpackJsonpfor-the-record"]||[]).push([[0],{200:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(109),c=n.n(i),o=n(238),s=n(218),u=n(228),d=n(236),l=n(12),b=n(162),j=n(206),h=n(245),f=n(217),p=n(202),O=n(243),v=n(135),x=n(14),g=n(90),y=n(216),m=n(239),w=n(2),k=Object(m.a)(y.a);function C(e){var t=e.children,n=Object(g.a)(e,["children"]);return Object(w.jsx)(k,Object(x.a)(Object(x.a)({},n),{},{children:t}))}var A=function(){var e=Object(l.h)(),t=Object(l.g)(),n=Object(j.a)([!1,!1,!0]),r=function(r,a,i){return Object(w.jsxs)(C,{as:"button",onTapStart:function(){e(r)},backgroundColor:"whiteAlpha.100",textAlign:"center",flex:"1",role:"link",children:[Object(w.jsxs)(h.a,{spacing:3,position:"absolute",children:[n&&Object(w.jsx)(f.a,{as:"h4",size:"md",children:a}),Object(w.jsx)(p.a,{boxSize:6,as:i,"aria-label":a})]}),(c=r===t.pathname,c?Object(w.jsx)(C,{boxSize:"100%",layout:!0,layoutId:"outline",initial:!1,transition:{type:"spring"},backgroundColor:"blue.700",zIndex:-1}):Object(w.jsx)(w.Fragment,{}))]});var c};return Object(w.jsx)(O.a,{children:Object(w.jsxs)(s.a,{boxSize:"100%",align:"stretch",justify:"space-around",overflow:"hidden",children:[r("/calendar","Calendar",v.a),r("/","Recording",v.c),r("/options","Options",v.b)]})})},S=n(57),M=n(11),R=n(106),T=n(15),D=n.n(T),P=n(30),L=n(36),E=n(40),z=n(219),I=n(220),N=n(240),U=n(221),F=n(222),W=n(223),H=n(224);function B(e){var t=Math.floor(e/60),n=e%60,r=function(e){return e<10?"0".concat(e):e};return"".concat(r(t),":").concat(r(n))}var Y=function(){function e(t){Object(L.a)(this,e),this.database=void 0,this.database=t}return Object(E.a)(e,[{key:"clearAllEntries",value:function(){var e=Object(P.a)(D.a.mark((function e(){var t=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.database.audioEntries.clear().then((function(){return t.database.audioData.clear()})));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addEntry",value:function(e){var t=this;return this.database.audioEntries.add({date:e.date,description:e.description,length:e.length}).then((function(){return t.database.audioData.add({date:e.date,audio:e.audio})}))}},{key:"getEntryHeaderByDescription",value:function(e){return this.database.audioEntries.where("description").equalsIgnoreCase(e).toArray()}},{key:"getEntry",value:function(){var e=Object(P.a)(D.a.mark((function e(t){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.database.audioEntries.get(t);case 2:return n=e.sent,e.next=5,this.database.audioData.get(t);case 5:if(r=e.sent,!n||!r){e.next=8;break}return e.abrupt("return",Object(x.a)(Object(x.a)({},n),r));case 8:return e.abrupt("return",void 0);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllEntriesDates",value:function(){return this.database.audioEntries.toCollection().primaryKeys()}},{key:"getMonthEntriesHeader",value:function(e){return this.database.audioEntries.where("date").between((t=e,Object(I.a)(t)),function(e){return Object(F.a)(e)}(e)).toArray();var t}},{key:"getDayEntriesHeader",value:function(e){return this.database.audioEntries.where("date").between((t=e,Object(W.a)(t)),function(e){return Object(H.a)(e)}(e)).toArray();var t}}]),e}(),K=n(172),V=n(170),J=function(e){Object(K.a)(n,e);var t=Object(V.a)(n);function n(){var e;return Object(L.a)(this,n),(e=t.call(this,"LocalDatabase")).audioEntries=void 0,e.audioData=void 0,e.user=void 0,e.version(1).stores({audioEntries:"date,description",user:"name",audioData:"date"}),e.user=e.table("user"),e.audioEntries=e.table("audioEntries"),e.audioData=e.table("audioData"),e}return n}(n(163).a),_=n(35),G=n(111);function X(e){return _.MaybeAsync.liftMaybe(G.Maybe.fromFalsy(e[0]))}var q=function(){function e(t){Object(L.a)(this,e),this.database=void 0,this.database=t}return Object(E.a)(e,[{key:"clearUser",value:function(){var e=this;return Object(_.MaybeAsync)((function(){return e.database.user.toCollection().delete()}))}},{key:"getUser",value:function(){var e=this;return Object(_.MaybeAsync)((function(){return e.database.user.toArray()})).chain(X)}},{key:"createUser",value:function(e){var t=this;return this.clearUser().chain((function(){return Object(_.MaybeAsync)((function(){return t.database.user.add(e)})).chain((function(){return t.getUser()}))}))}}]),e}(),$=new J;$.open().catch((function(e){return console.log(e)}));var Q=new Y($),Z=new q($),ee=new(function(){function e(){Object(L.a)(this,e),this.audio=void 0;var t=document.createElement("audio");t.preload="auto",document.body.append(t),this.audio=t,t.addEventListener("loadedmetadata",(function(){t.duration===1/0&&(t.currentTime=Number.MAX_SAFE_INTEGER,t.ontimeupdate=function(){t.ontimeupdate=function(){},t.currentTime=.1,t.currentTime=0})}))}return Object(E.a)(e,[{key:"setAudioSource",value:function(e){this.stopPlaying(),this.audio.src=e,this.audio.load(),this.audio.currentTime=0}},{key:"startPlaying",value:function(){this.audio.play()}},{key:"pausePlaying",value:function(){this.audio.pause()}},{key:"stopPlaying",value:function(){this.audio.pause(),this.audio.currentTime=0}},{key:"seekTo",value:function(e){e>0&&e<this.audio.duration&&(this.audio.currentTime=e)}},{key:"getAudioDuration",value:function(){var e=this.audio.duration;return Number.isNaN(e)||!Number.isFinite(e)?0:null!==e&&void 0!==e?e:0}},{key:"onAudioDurantionChange",value:function(e){var t=this;this.audio.addEventListener("durationchange",(function(){e(t.getAudioDuration())}))}},{key:"onAudioPlaybackEnd",value:function(e){var t=this;this.audio.addEventListener("ended",(function(){e(t.audio.currentTime)}))}},{key:"onCurrentTimeUpdate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=!0,a=function(){r&&(e(t.audio.currentTime),setTimeout((function(){r=!0}),n)),r=!1};this.audio.addEventListener("timeupdate",(function(){a()})),this.audio.addEventListener("ended",(function(){e(t.audio.currentTime)})),this.audio.addEventListener("seeked",(function(){e(t.audio.currentTime)}))}}]),e}()),te=Object(M.c)("playback/loadAudioDuration",(function(){return ee.getAudioDuration()})),ne=Object(M.b)("playback/changedAudioTime"),re=Object(M.c)("playback/createdAudioUrl",(function(e){var t=window.URL.createObjectURL(e);return ee.setAudioSource(t),t})),ae=Object(M.c)("playback/startPlayingRecord",(function(){ee.startPlaying()})),ie=Object(M.c)("playback/pausePlayingRecord",(function(){ee.pausePlaying()})),ce=Object(M.c)("playback/stopPlayingRecord",(function(){ee.stopPlaying()})),oe=Object(M.c)("playback/pausePlayButtonClicked",(function(e,t){var n=t.dispatch,r=(0,t.getState)().playback,a=r.isPlaying;r.audioUrl&&n(a?ie():ae())})),se=Object(M.c)("calendar/loadMonthRecordigns",function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q.getMonthEntriesHeader(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ue=Object(M.c)("calendar/selectedDay",(function(e){return e})),de=Object(M.c)("calendar/loadAudioPlayback",function(){var e=Object(P.a)(D.a.mark((function e(t,n){var r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,e.next=3,Q.getEntry(t);case 3:(a=e.sent)&&r(re(a.audio));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),le={selectedDay:null,recordings:[]},be=Object(M.d)(le,(function(e){e.addCase(se.fulfilled,(function(e,t){e.recordings=t.payload})).addCase(ue.fulfilled,(function(e,t){e.selectedDay=t.payload}))}));function je(e,t){var n=window;n.Cypress&&(n[e]=t)}var he=n(165),fe=n(126),pe=n.n(fe);function Oe(e){return(new TextDecoder).decode(e)}function ve(e){var t=e.split(",").map((function(e){return Number(e)}));return Uint8Array.from(t)}function xe(e){return Object(_.MaybeAsync)((function(){return window.crypto.subtle.exportKey("raw",e)}))}function ge(e){return xe(e).map(Oe)}function ye(e){var t,n=Object(he.curry)(me);return(t=e.secret,Object(_.MaybeAsync)((function(){var e=new TextEncoder;return window.crypto.subtle.importKey("raw",e.encode(t),"PBKDF2",!1,["deriveKey"])}))).chain(n(e.salt)).map((function(t){return{key:t,salt:e.salt}}))}function me(e,t){return Object(_.MaybeAsync)((function(){return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:e,iterations:1e5,hash:"SHA-256"},t,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}))}function we(e){return window.crypto.getRandomValues(new Uint8Array(e))}var ke=n(108),Ce=n.n(ke);function Ae(e){var t=we(16);return xe(e).map(Oe).chain((function(e){return function(e,t){return Object(_.MaybeAsync)((function(){return Ce.a.hash({pass:e,salt:t,type:Ce.a.ArgonType.Argon2id})}))}(e,t)}))}function Se(e,t){return Object(_.MaybeAsync)((function(){return Ce.a.verify({pass:e,encoded:t,type:Ce.a.ArgonType.Argon2id})}))}function Me(e,t){var n=e.loginKey,r=n.salt,a=n.encodedKey;return ye({salt:ve(r),secret:t}).chain((function(e){return function(e,t){return"string"===typeof e?Se(e,t):xe(e).map(Oe).chain((function(e){return Se(e,t)}))}(e.key,a).map((function(){return e.key}))}))}function Re(e,t){return ye(function(e){return{salt:we(16),secret:e}}(t)).chain(Te).map((function(t){return function(e,t){return{name:e,loginKey:t}}(e,t)}))}function Te(e){return function(e,t){return t.map((function(t){return{encodedKey:t.encoded,salt:e}}))}(e.salt.join(","),Ae(e.key))}var De=new(function(){function e(t,n){Object(L.a)(this,e),this.storage=void 0,this.users=void 0,this.authInfo="authInfo",this.storage=t,this.users=n}return Object(E.a)(e,[{key:"getAuthSession",value:function(){return this.storage.getItem(this.authInfo)}},{key:"setAuthSession",value:function(e){this.storage.setItem(this.authInfo,e)}},{key:"isAuthenticated",value:function(){return null!==this.getAuthSession()}},{key:"authenticate",value:function(e){var t=this;return this.users.getUser().chain((function(t){return Me(t,e)})).chain(ge).ifJust((function(e){return t.setAuthSession(e)})).run().then((function(e){return e.isJust()}))}},{key:"createNewUser",value:function(e,t){var n=this;return Re(e,t).chain((function(e){return n.users.createUser(e)})).run().then((function(e){return e.extractNullable()}))}}]),e}())(window.sessionStorage,Z);je("authSession",De);var Pe,Le=De,Ee=n(32);function ze(e){return e.type.endsWith("/pending")}function Ie(e){return e.type.endsWith("/rejected")}function Ne(e){return e.type.endsWith("/fulfilled")}function Ue(e,t,n){var r,a;(r=(a=e.addMatcher.apply(e,Object(Ee.a)(function(e,t){return[ze,function(n,r){r.type.includes(t)&&n&&n[e]&&(n[e]=Pe.Pending)}]}(t,n)))).addMatcher.apply(a,Object(Ee.a)(function(e,t){return[Ne,function(n,r){r.type.includes(t)&&n&&n[e]&&(n[e]=Pe.Completed,"boolean"===typeof r.payload&&!1===r.payload&&(n[e]=Pe.Rejected))}]}(t,n)))).addMatcher.apply(r,Object(Ee.a)(function(e,t){return[Ie,function(n,r){r.type.includes(t)&&n&&n[e]&&(n[e]=Pe.Rejected)}]}(t,n)))}!function(e){e[e.Completed=0]="Completed",e[e.Pending=1]="Pending",e[e.NotStarted=2]="NotStarted",e[e.Rejected=3]="Rejected"}(Pe||(Pe={}));var Fe=Object(M.c)("user/loadInitialState",Object(P.a)(D.a.mark((function e(){var t,n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.getUser().run();case 2:if(t=e.sent,n=t.extract(),r=Le.isAuthenticated(),!n){e.next=7;break}return e.abrupt("return",{isLoggedIn:r?Pe.Completed:Pe.NotStarted,isUserCreated:Pe.Completed,name:n.name,isLoadingInitialState:!1});case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)}))));je("loadInitialUserState",Fe);var We,He={isLoggedIn:Pe.NotStarted,isUserCreated:Pe.NotStarted,isLoadingInitialState:!0,name:""},Be=Object(M.d)(He,(function(e){e.addCase(Fe.fulfilled,(function(e,t){var n=t.payload;return n||Object(x.a)(Object(x.a)({},e),{},{isLoadingInitialState:!1})})),Ue(e,"isLoggedIn","loginUser"),Ue(e,"isUserCreated","createNewUser")})),Ye={audioUrl:"",isPlaying:!1,audioDuration:0,currentAudioTime:0},Ke=Object(M.d)(Ye,(function(e){return e.addCase(re.fulfilled,(function(e,t){e.audioUrl=t.payload})).addCase(ae.fulfilled,(function(e){e.isPlaying=!0})).addCase(ie.fulfilled,(function(e){e.isPlaying=!1})).addCase(ce.fulfilled,(function(e){e.isPlaying=!1})).addCase(te.fulfilled,(function(e,t){e.audioDuration=t.payload})).addCase(ne,(function(e,t){e.currentAudioTime=t.payload}))})),Ve=Object(M.c)("db/saveRecordInDb",(function(e){var t={date:new Date,description:"none yet",length:20,audio:e};Q.addEntry(t)})),Je=function(){function e(t){var n=this;Object(L.a)(this,e),this.mediaRecorder=void 0,this.dataChunks=void 0,this.mediaRecorder=t,this.dataChunks=new Array,this.mediaRecorder.ondataavailable=function(e){n.dataChunks.push(e.data)},this.mediaRecorder.onerror=function(e){return console.log(e)}}return Object(E.a)(e,[{key:"start",value:function(){this.dataChunks=new Array,this.mediaRecorder.start()}},{key:"stop",value:function(){var e=this,t=new Promise((function(t){e.mediaRecorder.onstop=function(){t(e.getRecordedData())}}));return this.mediaRecorder.stop(),t}},{key:"getRecordedData",value:function(){return new Blob(this.dataChunks,{type:this.mediaRecorder.mimeType})}}]),e}(),_e=new(function(){function e(){Object(L.a)(this,e),this.microphoneController=null}return Object(E.a)(e,[{key:"askForUserPermission",value:function(){var e=Object(P.a)(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.microphoneController){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,navigator.mediaDevices.getUserMedia({audio:!0});case 4:t=e.sent,n=new MediaRecorder(t,{audioBitsPerSecond:256e3}),this.microphoneController=new Je(n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"startRecording",value:function(){this.microphoneController&&this.microphoneController.start()}},{key:"stopRecording",value:function(){var e=Object(P.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.microphoneController){e.next=2;break}return e.abrupt("return",null);case 2:return e.abrupt("return",this.microphoneController.stop());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}());!function(e){e[e.Available=0]="Available",e[e.NotAvailable=1]="NotAvailable",e[e.Pending=2]="Pending"}(We||(We={}));var Ge=Object(M.c)("record/askForMicrophonePermission",Object(P.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e.askForUserPermission();case 2:case"end":return e.stop()}}),e)})))),Xe=Object(M.c)("record/startRecording",Object(P.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_e.startRecording();case 1:case"end":return e.stop()}}),e)})))),qe=Object(M.c)("record/stopRecording",function(){var e=Object(P.a)(D.a.mark((function e(t,n){var r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,e.next=3,_e.stopRecording();case 3:(a=e.sent)&&(r(re(a)),r(Ve(a)));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),$e=Object(M.c)("record/recordButtonClicked",function(){var e=Object(P.a)(D.a.mark((function e(t,n){var r,a,i,c,o,s,u;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.dispatch,a=n.getState,i=a(),c=i.record,o=c.isMicrophoneAvailable,s=c.isRecording,(u=Qe(o,s))&&r(u());case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());function Qe(e,t){return t?qe:e===We.NotAvailable?Ge:e===We.Available?Xe:null}var Ze={isRecording:!1,isMicrophoneAvailable:We.NotAvailable},et=Object(M.e)({name:"record",initialState:Ze,reducers:{},extraReducers:function(e){return e.addCase(Ge.fulfilled,(function(e){e.isMicrophoneAvailable=We.Available})).addCase(Ge.rejected,(function(e){e.isMicrophoneAvailable=We.NotAvailable})).addCase(Ge.pending,(function(e){e.isMicrophoneAvailable=We.Pending})).addCase(Xe.fulfilled,(function(e){e.isRecording=!0})).addCase(qe.fulfilled,(function(e){e.isRecording=!1}))}}).reducer,tt=Object(S.b)({record:et,playback:Ke,user:Be,calendar:be}),nt={calendar:le,record:Ze,playback:Ye,user:He},rt=function(e){return e instanceof Date||Object(M.f)(e)};var at=function(e){var t=Object(x.a)(Object(x.a)({},nt),e);return Object(M.a)({reducer:tt,preloadedState:t,middleware:function(e){return e({serializableCheck:{isSerializable:rt}})}})}(),it=at,ct=function(){return Object(R.b)()},ot=R.c;je("store",at);var st=function(e){return e.user.isUserCreated},ut=function(e){return e.user.isLoadingInitialState},dt=function(e){return e.user.isLoggedIn};function lt(e){var t=e.children,n=e.redirect,r=void 0===n||n,a=ot(dt);return Object(w.jsx)(w.Fragment,{children:a===Pe.Completed?t:r&&Object(w.jsx)(l.a,{to:"/login",replace:!0})})}var bt=n(166),jt=n(226),ht=n(75),ft=n(112),pt=function(e){return e.playback.isPlaying},Ot=function(e){return e.playback.audioDuration},vt=function(e){return e.playback.currentAudioTime},xt=Object(ft.a)(vt,Ot,(function(e,t){return e/t*100})),gt=n(225),yt=n(241);var mt=function(){var e=ot(Ot),t=ot(xt),n=ot(vt);return Object(w.jsxs)(h.a,{spacing:3,children:[Object(w.jsx)(gt.a,{fontSize:"2xl",children:n.toFixed(2)}),Object(w.jsxs)(yt.a,{"aria-label":"AudioPlaybackSlider",defaultValue:0,value:t,focusThumbOnChange:!1,onChange:function(e){!function(e){var t=ee.getAudioDuration()*(e/100);ee.seekTo(t)}(e)},children:[Object(w.jsx)(yt.d,{children:Object(w.jsx)(yt.b,{})}),Object(w.jsx)(yt.c,{})]}),Object(w.jsx)(gt.a,{fontSize:"2xl",children:e.toFixed(2)})]})};var wt=function(){var e=ct(),t=ot(pt),n=ot(Ot);return Object(w.jsxs)(bt.a,{p:[3,3,4,5],templateColumns:"1fr repeat(3, auto) 1fr",justifyItems:"center",alignItems:"center",justifyContent:"center",alignContent:"center",children:[Object(w.jsx)(bt.b,{colStart:2,children:Object(w.jsx)(jt.a,{isRound:!0,colorScheme:"green","aria-label":"Forward",size:"md",mx:2,icon:Object(w.jsx)(p.a,{boxSize:6,as:ht.b})})}),Object(w.jsx)(bt.b,{children:Object(w.jsx)(jt.a,{isRound:!0,colorScheme:"green","aria-label":"PlayPause",size:"lg",mx:["0.5","1.5","2.5","3"],disabled:0===n,icon:t?Object(w.jsx)(p.a,{boxSize:8,as:ht.c}):Object(w.jsx)(p.a,{boxSize:8,as:ht.d}),onClick:function(){e(oe())}})}),Object(w.jsx)(bt.b,{children:Object(w.jsx)(jt.a,{isRound:!0,colorScheme:"green","aria-label":"Rewind",size:"md",mx:2,icon:Object(w.jsx)(p.a,{boxSize:6,as:ht.e})})}),Object(w.jsx)(bt.b,{children:Object(w.jsx)(jt.a,{isRound:!0,marginLeft:["4","5","12"],colorScheme:"red","aria-label":"Stop",size:"sm",icon:Object(w.jsx)(p.a,{boxSize:4,as:ht.f}),onClick:function(){e(ce())}})}),Object(w.jsx)(bt.b,{width:"100%",colSpan:5,px:5,children:Object(w.jsx)(mt,{})})]})};var kt=function(){return Object(w.jsx)(wt,{})},Ct=n(6),At=n(230),St=n(229),Mt=Object(m.a)(u.a);function Rt(e){var t=e.children,n=Object(g.a)(e,["children"]);return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(Mt,Object(x.a)(Object(x.a)({},n),{},{children:t}))})}var Tt=function(e){var t,n,r=e.dayNumber,a=e.recordsNumber,i=void 0===a?0:a,c=ct();return Object(w.jsx)(St.a,{ratio:1,children:Object(w.jsx)(Rt,{boxSize:"100%",bgColor:"gray.700",whileTap:{scale:.8},whileHover:{scale:1.2},onClick:function(){r&&c(ue(r))},children:(t=i,n=Object(w.jsx)(gt.a,{textAlign:"center",children:r}),t>0?Object(w.jsx)(C,{bgColor:"blue.800",width:"30%",height:"30%",borderRadius:"50%",whileHover:{scale:1.2},children:Object(w.jsx)(C,{bgColor:"blue.300",width:"60%",height:"60%",borderRadius:"50%",whileHover:{scale:1.5},children:n})}):n)})})},Dt=function(e){var t,n=e.numberOfDays,r=e.startAtDay,a=e.recordsDays,i=Array.from(Array(n).keys(),(function(e){return e+1})).map((function(e){return Object(w.jsx)(Tt,{dayNumber:e,recordsNumber:a[e]})})),c=(t=r,["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].findIndex((function(e){return t===e}))),o=new Array(c).fill(0).map((function(){return Object(w.jsx)(Tt,{})})),s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((function(e){return Object(w.jsx)(gt.a,{bgColor:"blue.600",textAlign:"center",children:e})}));return Object(w.jsx)(Rt,{initial:{x:"-25vw"},animate:{x:0,transition:{type:"spring",bounce:.5}},children:Object(w.jsxs)(At.a,{width:"100%",columns:7,spacingX:[2,3,5,5],spacingY:[2,2,3,3],children:[s,o,i]})})},Pt=n(171),Lt=Object(m.a)(Pt.a);function Et(e){var t=e.children,n=Object(g.a)(e,["children"]);return Object(w.jsx)(Lt,Object(x.a)(Object(x.a)({colorScheme:"gray",whileHover:{scale:1.1},whileTap:{scale:.6,transition:{duration:.1}}},n),{},{children:t}))}var zt=function(e){var t=e.date,n=e.onNextMonth,r=e.onPreviousMonth,a=e.recordingDays,i=void 0===a?{}:a,c=function(e){return Object(z.a)(e)}(t),o=function(e){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][Object(I.a)(e).getDay()]}(t),s=function(e){return Object(N.a)(e,"MMMM yyyy")}(t);return Object(w.jsxs)(u.a,{boxSize:"100%",children:[Object(w.jsxs)(h.a,{justify:"center",spacing:8,marginBottom:4,children:[Object(w.jsx)(Et,{"aria-label":"PreviousMonth",onClick:function(){return r()},children:Object(w.jsx)(gt.a,{textAlign:"center",children:"<"})}),Object(w.jsx)(y.a,{children:Object(w.jsx)(Rt,{initial:{scaleY:0},animate:{scaleY:1},children:Object(w.jsx)(f.a,{textAlign:"center",children:s})},"CalendarTitle_".concat(s))}),Object(w.jsx)(Et,{"aria-label":"NextMonth",onClick:function(){return n()},children:Object(w.jsx)(gt.a,{textAlign:"center",children:">"})})]}),Object(w.jsx)(Dt,{numberOfDays:c,startAtDay:o,recordsDays:i},"CalendarMonth_".concat(s))]})};var It=function(e){var t=e.audioEntry,n=ct();return Object(w.jsx)(y.a,{width:"100%",children:Object(w.jsxs)(Rt,{as:"button",width:"100%",borderWidth:"1px",borderRadius:"lg",textAlign:"center",whileHover:{backgroundColor:"#2a4365"},whileTap:{scale:.85},initial:{scale:0},animate:{scale:1,transition:{duration:.2,ease:"circOut"}},p:"2",onClick:function(){return n(de(t.date))},children:[Object(w.jsx)(u.a,{mt:"1",fontWeight:"semibold",as:"h4",lineHeight:"tight",isTruncated:!0,children:"".concat(t.date.toLocaleTimeString())}),Object(w.jsx)(u.a,{color:"gray.500",fontWeight:"semibold",letterSpacing:"wide",fontSize:"xs",textTransform:"uppercase",ml:"2",children:"".concat(t.description," ").concat(t.length,"s")})]})})};var Nt=function(e){var t=e.dayRecordingHeaders;return Object(w.jsxs)(h.d,{divider:Object(w.jsx)(h.c,{borderColor:"gray.200"}),spacing:4,align:"stretch",children:[Object(w.jsx)(y.a,{mt:"1",fontWeight:"semibold",as:"h2",lineHeight:"tight",isTruncated:!0,children:Object(w.jsx)(gt.a,{fontSize:"3xl",children:"".concat(t[0].date.toLocaleDateString())})}),t.map((function(e){return Object(w.jsx)(It,{audioEntry:e},e.date.toString())}))]})},Ut=n(8),Ft=function(e){return e.calendar.recordings},Wt=Object(ft.a)(Ft,(function(e){return e.map((function(e){return e.date.getDate()})).reduce((function(e,t){return Object(x.a)(Object(Ut.a)({},t,1),e)}),{})})),Ht=Object(ft.a)(Ft,(function(e){return e.calendar.selectedDay}),(function(e,t){return t?e.filter((function(e){return n=e.date,r=t,n.getDate()===r;var n,r})):[]}));var Bt=function(){var e=ct(),t=Object(r.useState)(new Date),n=Object(Ct.a)(t,2),a=n[0],i=n[1],c=ot(Wt),o=ot(Ht);return Object(r.useEffect)((function(){e(se(a))}),[a]),Object(w.jsxs)(h.b,{direction:["column","column","column","row"],spacing:5,m:[2,2,3,5],justify:"center",align:"stretch",children:[Object(w.jsx)(u.a,{width:["100%","100%","100%","58%"],children:Object(w.jsx)(zt,{date:a,onNextMonth:function(){return i((e=a,Object(U.a)(e,1)));var e},onPreviousMonth:function(){return i((e=a,Object(U.a)(e,-1)));var e},recordingDays:c})}),0!==o.length&&Object(w.jsx)(u.a,{width:["100%","100%","100%","42%"],children:Object(w.jsx)(Nt,{dayRecordingHeaders:o})})]})};var Yt=function(){return Object(w.jsx)(u.a,{centerContent:!0,boxSize:"100%",children:Object(w.jsx)(Bt,{})})},Kt=n(242),Vt=n(233),Jt=n(72),_t=n(231),Gt=n(247),Xt=n(232);var qt=function(e){var t=Object(r.useState)(pe.a.mapValues(e,(function(){return{error:null,value:""}}))),n=Object(Ct.a)(t,2),a=n[0],i=n[1],c=Object(r.useCallback)((function(t){var n=Object.entries(e).reduce((function(e,n){var r=Object(Ct.a)(n,2),a=r[0],i=r[1];if(i){var c=t[a].value,o=i(c,t);return Object(x.a)(Object(x.a)({},e),{},Object(Ut.a)({},a,{error:o,value:c}))}return e}),{});i(Object(x.a)(Object(x.a)({},t),n))}),[e]);return[Object(r.useCallback)((function(e){var t=e.target,n=t.id,r=t.value;c(Object(x.a)(Object(x.a)({},a),{},Object(Ut.a)({},n,Object(x.a)(Object(x.a)({},a[n]),{},{value:r}))))}),[a,c]),a]};var $t=function(e){var t=e.definition,n=e.submitText,r=void 0===n?"Submit":n,a=e.onSubmit,i=void 0===a?function(){}:a,c=qt(t.reduce((function(e,t){var n,r=null!==(n=t.validation)&&void 0!==n?n:function(){return null};return Object(x.a)(Object(x.a)({},e),{},Object(Ut.a)({},t.id,r))}),{})),o=Object(Ct.a)(c,2),s=o[0],u=o[1],d=t.map((function(e){var t,n;return Object(w.jsxs)(Jt.a,{id:e.id,isInvalid:(n=u[e.id].error,null!==n&&""!==n),children:[Object(w.jsx)(_t.a,{children:e.label}),Object(w.jsx)(Gt.a,{type:null!==(t=e.type)&&void 0!==t?t:"text"}),e.helperText&&Object(w.jsx)(Jt.b,{children:e.helperText}),Object(w.jsx)(Xt.a,{children:u[e.id].error})]},e.id)})),l=Object.values(u).reduce((function(e,t){return null===t.error||""!==t.error||e}),!1);return Object(w.jsxs)("form",{onChange:s,onSubmit:function(){i(u)},children:[Object(w.jsx)(h.d,{spacing:7,align:"stretch",children:d}),Object(w.jsx)(Pt.a,{width:"100%",my:7,type:"submit",colorScheme:"gray",disabled:l,children:r})]})},Qt=Object(M.c)("user/createNewUser",function(){var e=Object(P.a)(D.a.mark((function e(t){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,r=t.password,e.next=3,Le.createNewUser(n,r);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());je("createNewUser",Qt);var Zt=Object(M.c)("user/loginUser",function(){var e=Object(P.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.authenticate(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());je("loginUser",Zt);var en=function(){var e=ct();return Object(w.jsx)($t,{onSubmit:function(t){return e(Qt({name:t.name.value,password:t.password.value}))},definition:[{id:"name",label:"Your Name",helperText:"What should we call you?",validation:function(e){return e.length>=5?"":"Your name is too short"}},{id:"password",label:"Password",type:"password",helperText:"Your data is not stored in servers. If you lose your password your data is lost forever!",validation:function(e){return e.length>=5?"":"Your password is too short"}},{id:"passwordConfirmation",label:"Confirm Password",type:"password",validation:function(e,t){return e===t.password.value?"":"Passwords are different"}}]})};var tn=function(e){var t=e.actionStatus,n=e.statusMap[t];return Object(w.jsx)(w.Fragment,{children:n})},nn=n(227);var rn=function(){return Object(w.jsx)(y.a,{children:Object(w.jsx)(nn.a,{size:"xl",my:5})})};var an=function(){var e,t=ot(st),n=Object(w.jsx)(Kt.a,{in:!0,offsetY:"-50px",children:Object(w.jsx)(f.a,{py:10,as:"h6",size:"xs",pb:5,color:"red.300",textAlign:"center",children:"Failed to create user :(. Please reload and try again."})});return Object(w.jsx)(Vt.a,{maxW:"container.sm",children:Object(w.jsx)(tn,{actionStatus:t,statusMap:(e={},Object(Ut.a)(e,Pe.NotStarted,Object(w.jsx)(en,{})),Object(Ut.a)(e,Pe.Completed,Object(w.jsx)(l.a,{to:"/",replace:!0})),Object(Ut.a)(e,Pe.Rejected,n),Object(Ut.a)(e,Pe.Pending,Object(w.jsx)(rn,{})),e)})})},cn=n(234),on=n(66);var sn=function(){var e=ct();return Object(w.jsx)($t,{onSubmit:function(t){return e(Zt(t.password.value))},definition:[{id:"password",label:"Password",type:"password",helperText:"Your data is not stored in servers. If you lose your password your data is lost forever!",validation:function(e){return e.length>=5?"":"Your password is too short"}}]})};var un=function(){var e,t,n=ot(dt),r=ot(st),a=Object(w.jsx)(tn,{actionStatus:n,statusMap:(e={},Object(Ut.a)(e,Pe.NotStarted,Object(w.jsx)(sn,{})),Object(Ut.a)(e,Pe.Completed,Object(w.jsx)(l.a,{to:"/",replace:!0})),Object(Ut.a)(e,Pe.Rejected,(t=Object(w.jsx)(sn,{}),Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(Kt.a,{in:!0,offsetY:"-50px",children:[Object(w.jsx)(f.a,{as:"h6",size:"xs",pb:5,color:"red.300",children:"Incorrect Password"}),t]})}))),Object(Ut.a)(e,Pe.Pending,Object(w.jsx)(rn,{})),e)});return Object(w.jsx)(Vt.a,{maxW:"container.sm",mt:5,children:r===Pe.Completed?a:Object(w.jsx)(y.a,{textAlign:"center",children:Object(w.jsxs)(f.a,{as:"h2",size:"lg",children:["Don't have a user?","  ",Object(w.jsx)(cn.a,{as:"h2",children:Object(w.jsx)(on.b,{to:"/create",children:" How about creating a new user?"})})]})})})},dn=n(207);var ln=function(){var e=Object(dn.b)().toggleColorMode;return Object(w.jsx)(jt.a,{onClick:e,colorScheme:"gray","aria-label":"ColorMode",icon:Object(w.jsx)(p.a,{as:ht.a})})};var bn=function(){return Object(w.jsx)(u.a,{centerContent:!0,boxSize:"100%",children:Object(w.jsx)(ln,{})})},jn=n(205),hn=function(e){return e.record.isRecording},fn=Object(ft.a)((function(e){return e.record.isMicrophoneAvailable}),(function(e){return e===We.Available}));var pn=function(){var e=Object(r.useState)(0),t=Object(Ct.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){setTimeout((function(){a(n+1)}),1e3)}),[n,a]),Object(w.jsx)(f.a,{p:1,as:"h2",size:"3xl",isTruncated:!0,children:B(n)})};var On=function(){var e=ct(),t=ot(hn),n=ot(fn),r="#ff524d",a=Object(w.jsxs)("button",{type:"button",children:[Object(w.jsx)(jn.a,{children:"End Recording"}),Object(w.jsxs)(m.a.svg,{xmlns:"http://www.w3.org/2000/svg",className:"ionicon",viewBox:"0 0 512 512",width:"100%",role:"presentation",children:[Object(w.jsx)(m.a.path,{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z",fill:"none",stroke:r,strokeMiterlimit:"10",strokeWidth:"32",strokeLinecap:"round"}),Object(w.jsx)(m.a.circle,{initial:{opacity:0,pathLength:0,r:0},animate:{pathLength:1,opacity:1,r:144},transition:{ease:"easeInOut",duration:.5},fill:r,cx:"256",cy:"256",r:"144"})]})]}),i=Object(w.jsxs)(m.a.svg,{xmlns:"http://www.w3.org/2000/svg",width:"100%",fill:"none",viewBox:"0 0 512 512",stroke:"currentColor",children:[Object(w.jsx)("title",{children:"microphone not authorized or available"}),Object(w.jsx)(m.a.path,{initial:{opacity:0,pathLength:0},animate:{pathLength:1,opacity:1},transition:{ease:"easeInOut",duration:1.5},strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",stroke:r,d:"M432 400L96 64"}),Object(w.jsx)(m.a.path,{initial:{opacity:0,pathLength:0},animate:{pathLength:1,opacity:1},transition:{ease:"easeInOut",duration:1.5},strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",fill:"currentColor",stroke:r,d:"M400 240v-31.55c0-8.61-6.62-16-15.23-16.43A16 16 0 00368 208v32a111.58 111.58 0 01-2.45 23.31 4.05 4.05 0 001.07 3.69l21.82 21.81a2 2 0 003.29-.72A143.27 143.27 0 00400 240zM256 352a112.36 112.36 0 01-112-112v-31.55c0-8.61-6.62-16-15.23-16.43A16 16 0 00112 208v32c0 74 56.1 135.12 128 143.11V432h-47.55c-8.61 0-16 6.62-16.43 15.23A16 16 0 00192 464h127.55c8.61 0 16-6.62 16.43-15.23A16 16 0 00320 432h-48v-48.89a143.08 143.08 0 0052-16.22 4 4 0 00.91-6.35L307 342.63a4 4 0 00-4.51-.78A110.78 110.78 0 01256 352zM256 80a47.18 47.18 0 0148 48v74.72a4 4 0 001.17 2.82L332.59 233a2 2 0 003.41-1.42V128.91C336 85 301 48.6 257.14 48a79.66 79.66 0 00-68.47 36.57 4 4 0 00.54 5l19.54 19.54a2 2 0 003.25-.63A47.44 47.44 0 01256 80z"}),Object(w.jsx)(m.a.path,{initial:{opacity:0,pathLength:0},animate:{pathLength:1,opacity:1},transition:{ease:"easeInOut",duration:1.5},strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",fill:"currentColor",stroke:r,d:"M207.27 242.9L179.41 215a2 2 0 00-3.41 1.42V239a80.89 80.89 0 0023.45 56.9 78.55 78.55 0 0077.8 21.19 2 2 0 00.86-3.35l-24.91-24.91a4.08 4.08 0 00-2.42-1.15c-21.65-2.52-39.48-20.44-42.37-42.43a4 4 0 00-1.14-2.35z"})]}),c=Object(w.jsxs)("button",{type:"button",children:[Object(w.jsx)(jn.a,{children:"Start Recording"}),Object(w.jsxs)(m.a.svg,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",stroke:"currentColor",width:"100%",role:"presentation",children:[Object(w.jsx)(m.a.path,{initial:{opacity:0,pathLength:0},animate:{pathLength:1,opacity:1},transition:{ease:"easeInOut",duration:1.5},fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M192 448h128M384 208v32c0 70.4-57.6 128-128 128h0c-70.4 0-128-57.6-128-128v-32M256 368v80"}),Object(w.jsx)(m.a.path,{initial:{opacity:0,pathLength:0},animate:{pathLength:1,opacity:1},transition:{ease:"easeInOut",duration:1.5},d:"M256 64a63.68 63.68 0 00-64 64v111c0 35.2 29 65 64 65s64-29 64-65V128c0-36-28-64-64-64z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})]})]}),o=Object(w.jsx)(w.Fragment,{children:t?a:n?c:i});return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(y.a,{m:10,width:["80%","80%","70%","50%","30%"],children:Object(w.jsx)(u.a,{onClick:function(){return e($e())},children:o})}),Object(w.jsx)(y.a,{children:Object(w.jsx)(Kt.a,{in:t,offsetY:"20px",children:t&&Object(w.jsx)(pn,{})})})]})};var vn=function(){var e=ct();return Object(r.useEffect)((function(){e(Ge())}),[e]),Object(w.jsx)(Vt.a,{overflow:"hidden",maxW:"container.xl",centerContent:!0,children:Object(w.jsx)(On,{})})},xn=[function(e){ee.onAudioDurantionChange((function(){e(te())}))},function(e){ee.onCurrentTimeUpdate((function(t){e(ne(t))}))},function(e){ee.onAudioPlaybackEnd((function(){e(ce())}))}];var gn=function(){var e=ct();Object(r.useEffect)((function(){e(Fe()),xn.forEach((function(t){return t(e)}))}),[e])},yn=n(235);var mn=function(){return Object(w.jsxs)(h.b,{spacing:5,children:[Object(w.jsx)(yn.a,{height:"50px"}),Object(w.jsx)(yn.a,{height:"50px"}),Object(w.jsx)(yn.a,{height:"50px"})]})};function wn(e){var t=e.children,n=ot(ut);return Object(w.jsx)(w.Fragment,{children:n?Object(w.jsx)(Vt.a,{maxW:"container.sm",mt:5,children:Object(w.jsx)(mn,{})}):t})}var kn=function(){gn();var e=["10%","10%","7%"],t=e.map((function(e){return 100-Number(e.replace("%",""))})).map((function(e){return"".concat(String(e),"%")})),n=function(e){var n=e.children;return Object(w.jsxs)(s.a,{height:t,direction:"column",children:[Object(w.jsx)(u.a,{overflow:"auto",children:n}),Object(w.jsx)(d.a,{}),Object(w.jsx)(u.a,{children:Object(w.jsx)(kt,{})})]})},r=Object(w.jsx)(wn,{children:Object(w.jsx)(lt,{children:Object(w.jsx)(n,{children:Object(w.jsx)(vn,{})})})}),a=Object(w.jsx)(wn,{children:Object(w.jsx)(lt,{children:Object(w.jsx)(n,{children:Object(w.jsx)(bn,{})})})}),i=Object(w.jsx)(n,{children:Object(w.jsx)(Yt,{})}),c=Object(w.jsx)(wn,{children:Object(w.jsx)(u.a,{height:t,children:Object(w.jsx)(un,{})})}),o=Object(w.jsx)(wn,{children:Object(w.jsx)(u.a,{height:t,children:Object(w.jsx)(an,{})})});return Object(w.jsxs)(b.a,{children:[Object(w.jsx)(u.a,{as:"nav",height:e,children:Object(w.jsx)(lt,{redirect:!1,children:Object(w.jsx)(A,{})})}),Object(w.jsxs)(l.d,{children:[Object(w.jsx)(l.b,{path:"/*",element:r}),Object(w.jsx)(l.b,{path:"calendar",element:i}),Object(w.jsx)(l.b,{path:"login",element:c}),Object(w.jsx)(l.b,{path:"create",element:o}),Object(w.jsx)(l.b,{path:"options",element:a})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Cn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,248)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))},An=n(237),Sn={initialColorMode:"dark",useSystemColorMode:!1},Mn=Object(An.a)({config:Sn,styles:{global:{"*":{"-webkit-tap-highlight-color":"transparent !important"}}}}),Rn=n(244);c.a.render(Object(w.jsxs)(a.a.StrictMode,{children:[Object(w.jsx)(o.a,{initialColorMode:Mn.config.initialColorMode}),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:it;return Object(w.jsx)(R.a,{store:t,children:Object(w.jsx)(on.a,{children:Object(w.jsx)(Rn.a,{theme:Mn,children:e})})})}(Object(w.jsx)(kn,{}))]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),Cn()}},[[200,1,2]]]);
//# sourceMappingURL=main.83c6366e.chunk.js.map