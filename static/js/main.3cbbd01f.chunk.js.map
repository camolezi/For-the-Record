{"version":3,"sources":["components/Motion/MotionCenter.tsx","components/Header/AppHeader.tsx","utils/DateTime/WeekDays.ts","modules/Db/AudioEntriesDb.ts","modules/Db/LocalDatabase.ts","utils/FunctionalUtils.ts","modules/Db/UserDb.ts","modules/Db/Databases.ts","modules/Playback/AudioController/AudioController.ts","modules/Playback/actions/PlaybackActions.ts","modules/Calendar/actions/CalendarActions.ts","modules/Calendar/store/CalendarSlice.ts","utils/testing/CypressUtils.ts","utils/Buffer/BufferUtils.ts","modules/Crypto/Authenticate.ts","modules/Crypto/HashStorage.ts","modules/Authentication/Login.ts","modules/Authentication/AuthSession.ts","utils/ReduxUtils/AsyncActionHelpers.ts","app/LoadInitialState/LoadInitialStateActions.ts","modules/Authentication/state/UserSlice.ts","modules/Recording/state/RecordTypes.ts","modules/Playback/state/PlaybackSlice.ts","modules/Db/actions/AudioDbActions.ts","modules/Recording/Microphone/MicController.ts","modules/Recording/Microphone/Microphone.ts","modules/Recording/RecordActions.ts","modules/Recording/state/RecordSlice.ts","app/Store.ts","modules/Authentication/state/UserSelectors.ts","modules/Authentication/OnlyLoggedIn.tsx","modules/Playback/state/PlaybackSelectors.ts","modules/Playback/components/AudioSlider.tsx","modules/Playback/components/AudioPlayer.tsx","modules/Playback/PlaybackPanel.tsx","components/Motion/MotionBox.tsx","modules/Calendar/Tile/Tile.tsx","modules/Calendar/MonthCalendar/CalendarMonth.tsx","modules/Calendar/MonthCalendar/MonthButton.tsx","modules/Calendar/Calendar.tsx","modules/Calendar/DayRecordingsDisplay/RecordingItemDisplay.tsx","modules/Calendar/DayRecordingsDisplay/DayRecordingsDisplay.tsx","modules/Calendar/store/CalendarSelectors.ts","modules/Calendar/CalendarWIdget.tsx","views/CalendarView.tsx","modules/Forms/useForm.tsx","components/Form/BasicForm.tsx","modules/Authentication/actions/UserActions.ts","modules/Authentication/UserCreation/UserCreationForm.tsx","utils/ReduxUtils/RenderAsyncActions.tsx","components/Loading/LoadingSpinner.tsx","views/CreateUserView.tsx","modules/Authentication/UserLogin/UserLoginForms.tsx","views/LoginView.tsx","components/Header/ColorModeButton.tsx","views/OptionsView.tsx","modules/Recording/state/RecordSelectors.ts","modules/Recording/RecordingCounter.tsx","modules/Recording/RecordPanel.tsx","views/RecordView.tsx","app/LoadInitialState/OnPageLoadActions.ts","app/LoadInitialState/LoadInitialStateHook.ts","components/Loading/PageSkeleton.tsx","app/LoadInitialState/WithInitialPageSkeleton.tsx","app/App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","theme/config.ts","theme/theme.ts","index.tsx","app/Providers.tsx"],"names":["MotionCenterChakra","motion","Center","MotionCenter","children","props","AppHeader","navigate","useNavigate","location","useLocation","useDesktopHeading","useBreakpointValue","MenuItem","path","text","icon","as","onTapStart","backgroundColor","textAlign","flex","role","spacing","position","size","boxSize","aria-label","isSelected","pathname","layout","layoutId","initial","transition","type","zIndex","AnimateSharedLayout","align","justify","overflow","BsCalendar","BsMic","BsGear","formatSecondsToCounter","totalSeconds","minutes","Math","floor","seconds","withLeadingZero","value","AudioEntriesDb","database","this","a","audioEntries","clear","then","audioData","header","add","date","description","length","audio","where","equalsIgnoreCase","toArray","get","data","undefined","toCollection","primaryKeys","monthDate","between","startOfMonth","endOfMonth","getEndMonthDay","day","startOfDay","endOfDay","getEndOfDay","LocalDatabase","user","version","stores","table","Dexie","getFirst","array","MaybeAsync","liftMaybe","Maybe","fromFalsy","UserDb","delete","chain","clearUser","getUser","localdb","open","catch","e","console","log","audiodb","userdb","document","createElement","preload","body","append","src","stopPlaying","load","currentTime","play","pause","duration","Number","isNaN","func","addEventListener","getAudioDuration","updatePeriod","shouldUpdate","callUpdatePeriod","setTimeout","loadAudioDuration","createAsyncThunk","changedAudioTime","createAction","createdAudioUrl","audioURL","window","URL","createObjectURL","setAudioSource","startPlayingRecord","startPlaying","pausePlayingRecord","pausePlaying","stopPlayingRecord","pausePlayButtonClicked","_","dispatch","getState","playback","isPlaying","audioUrl","loadMonthRecordigns","getMonthEntriesHeader","selectedDay","loadAudioPlayback","getEntry","InitialCalendarState","recordings","CalendarSlice","createReducer","builder","addCase","fulfilled","state","action","payload","AddToCypressWindow","name","obj","windowNotTyped","Cypress","ArrayBufferToStr","TextDecoder","decode","StrToUint8Array","dataArray","split","map","Uint8Array","from","CryptoKeyToBuffer","key","crypto","subtle","exportKey","CryptoKeyToStr","GenerateKeyFromSecret","secretParam","secret","generateKeyFromSecret","curry","generateKeyFromMaterial","encoder","TextEncoder","importKey","encode","salt","material","deriveKey","iterations","hash","GenerateSalt","bytes","getRandomValues","HashKeyToStorage","keydata","keyData","argon2","pass","ArgonType","Argon2id","argon2Hash","argon2Verify","password","encodedKey","verify","encoded","AuthenticateUser","loginKey","keyParam","keyStr","VerifyHash","CreateNewUser","GenerateSaltForSecret","hashKey","createUser","result","buildLoginKey","join","authSession","storage","users","authInfo","getItem","sessionInfo","setItem","getAuthSession","ifJust","setAuthSession","run","isJust","maybe","extractNullable","sessionStorage","AsyncActionStatus","isPendingAction","endsWith","isRejectedAction","isFulfilledAction","addDefaultAsyncMatcher","fieldInSlice","actionName","addMatcher","includes","Pending","addPendingMatcher","Completed","Rejected","addFulfilledMatcher","addRejectedMatcher","loadInitialUserState","userJust","extract","isLoggedIn","isAuthenticated","NotStarted","isUserCreated","isLoadingInitialState","MicAvailability","InitialUserState","UserSlice","initialState","InitialPlaybackState","audioDuration","currentAudioTime","PlaybackSlice","saveRecordInDb","entry","Date","addEntry","MicrophoneController","mediaRecorder","dataChunks","Array","ondataavailable","event","push","onerror","start","stopPromise","Promise","resolve","onstop","getRecordedData","stop","Blob","mimeType","microphone","microphoneController","navigator","mediaDevices","getUserMedia","microphoneStream","media","MediaRecorder","askForMicrophonePermission","askForUserPermission","startRecording","stopRecording","recordButtonClicked","record","isMicrophoneAvailable","isRecording","nextState","calculateNextRecordAction","NotAvailable","Available","InitialRecordState","RecordSlice","createSlice","reducers","extraReducers","rejected","pending","rootReducer","combineReducers","calendar","AppInitialState","store","partialState","appInitialState","configureStore","reducer","preloadedState","CreateStore","useTypedDispatch","useDispatch","useTypedSelector","useSelector","selectIsUserCreated","selectIsLoadingInitialState","selectIsUserLoggedIn","OnlyLoggedIn","redirect","isUsedloggedIn","to","replace","selectIsPlaying","selectAudioDuration","selectCurrentAudioTime","selectCurrentAudioCompletedPercentage","createSelector","AudioSlider","audioPercentage","currentPosition","fontSize","toFixed","defaultValue","focusThumbOnChange","onChange","sliderValue","seekPosition","seekTo","seekAudioTo","AudioPlayer","p","templateColumns","justifyItems","alignItems","justifyContent","alignContent","colStart","isRound","colorScheme","mx","MdForward10","MdPause","MdPlayArrow","onClick","MdReplay10","marginLeft","MdStop","width","colSpan","px","PlaybackPanel","MotionBoxChakra","Box","MotionBox","Tile","numberOfRecords","element","dayNumber","recordsNumber","ratio","bgColor","whileTap","scale","whileHover","height","borderRadius","CalendarMonth","numberOfDays","startAtDay","recordsDays","tiles","keys","weekDayOffset","findIndex","tilesOffset","fill","weekDaysTitles","x","animate","bounce","columns","spacingX","spacingY","MotionButton","Button","MonthButton","Calendar","onNextMonth","onPreviousMonth","recordingDays","daysInMonth","getDaysInMonth","getNumberDaysInMonth","firstDayInMonth","getDay","getFirstWeekDayInMonth","monthTitle","format","formatToMonthYear","marginBottom","scaleY","RecordingItemDisplay","audioEntry","borderWidth","ease","mt","fontWeight","lineHeight","isTruncated","toLocaleTimeString","color","letterSpacing","textTransform","ml","DayRecordingsDisplay","dayRecordingHeaders","divider","borderColor","toLocaleDateString","recording","toString","selectRecording","selectMonthRecordingObject","getDate","reduce","recordingObj","selectDayRecordingHeaders","filter","dayOfMonth","CelendarWidget","useState","currentDate","setCurrentDate","monthRecordingObject","useEffect","direction","m","addMonths","CelendarView","centerContent","useForm","validation","mapValues","error","formState","changeState","validateFormFields","useCallback","currentformState","newFormState","Object","entries","id","validationFunc","newValidationState","inputElement","target","BasicForm","definition","submitText","onSubmit","validationObj","input","inputs","isInvalid","label","helperText","submitButtonDisabled","values","current","field","my","disabled","createNewUser","loginUser","authenticate","UserCreationForm","otherValues","RenderAsyncActions","actionStatus","toRender","statusMap","LoadingSpinner","CreateUserView","failedErrorMessage","in","offsetY","py","pb","maxW","UserLoginForms","LoginView","userLoginForm","ColorModeButton","toggleColorMode","useColorMode","MdBrightness4","OptionsView","selectIsRecording","selectIsMicAvailable","micAvailability","RecordingCounter","counter","setCounter","RecordPanel","isMicAvailable","redRecording","recordingIcon","svg","xmlns","className","viewBox","d","stroke","strokeMiterlimit","strokeWidth","strokeLinecap","circle","opacity","pathLength","r","cx","cy","micNotAvailableIcon","strokeLinejoin","micAvailableIcon","icons","RecordView","OnPageLoadActions","onAudioDurantionChange","onCurrentTimeUpdate","onAudioPlaybackEnd","LoadInitialState","forEach","PageSkeleton","WithInitialPageSkeleton","appIsLoading","App","navBarHeight","contentHeight","String","WithPlaybackLayout","recordView","otionsView","calendarView","CalendarView","loginView","createUserView","Boolean","hostname","match","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","themeConfig","initialColorMode","useSystemColorMode","AppTheme","extendTheme","config","ReactDOM","render","StrictMode","mainStore","theme","WrapWithProviders","getElementById","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.3cbbd01f.chunk.js","sourcesContent":["import React from 'react';\n\nimport { Center, CenterProps } from '@chakra-ui/react';\nimport { HTMLMotionProps, motion } from 'framer-motion';\n\nconst MotionCenterChakra = motion(Center);\n\nexport default function MotionCenter({\n  children,\n  ...props\n}: CenterProps & HTMLMotionProps<'div'>): JSX.Element {\n  return <MotionCenterChakra {...props}>{children}</MotionCenterChakra>;\n}\n","import React from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport {\n  Flex,\n  Heading,\n  HStack,\n  Icon,\n  useBreakpointValue,\n} from '@chakra-ui/react';\nimport { AnimateSharedLayout } from 'framer-motion';\nimport { BsCalendar, BsMic, BsGear } from 'react-icons/bs';\nimport { IconType } from 'react-icons';\nimport MotionCenter from '../Motion/MotionCenter';\n\nfunction AppHeader(): JSX.Element {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const useDesktopHeading = useBreakpointValue([false, false, true]);\n\n  const notSelectedBackgroundColor = 'whiteAlpha.100';\n  const selectedBackgroudColor = 'blue.700';\n\n  const calendarPath = '/calendar';\n  const recordingPath = '/';\n  const optionsPath = '/options';\n\n  const wrapDecorationIfSelected = (isSelected: boolean): JSX.Element => {\n    if (isSelected)\n      return (\n        <MotionCenter\n          boxSize=\"100%\"\n          layout\n          layoutId=\"outline\"\n          initial={false}\n          transition={{ type: 'spring' }}\n          backgroundColor={selectedBackgroudColor}\n          zIndex={-1}\n        />\n      );\n\n    return <></>;\n  };\n\n  const MenuItem = (path: string, text: string, icon: IconType) => (\n    <MotionCenter\n      as=\"button\"\n      onTapStart={() => {\n        navigate(path);\n      }}\n      backgroundColor={notSelectedBackgroundColor}\n      textAlign=\"center\"\n      flex=\"1\"\n      role=\"link\"\n    >\n      <HStack spacing={3} position=\"absolute\">\n        {useDesktopHeading && (\n          <Heading as=\"h4\" size=\"md\">\n            {text}\n          </Heading>\n        )}\n        <Icon boxSize={6} as={icon} aria-label={text} />\n      </HStack>\n\n      {wrapDecorationIfSelected(path === location.pathname)}\n    </MotionCenter>\n  );\n\n  return (\n    <AnimateSharedLayout>\n      <Flex\n        boxSize=\"100%\"\n        align=\"stretch\"\n        justify=\"space-around\"\n        overflow=\"hidden\"\n      >\n        {MenuItem(calendarPath, 'Calendar', BsCalendar)}\n        {MenuItem(recordingPath, 'Recording', BsMic)}\n        {MenuItem(optionsPath, 'Options', BsGear)}\n      </Flex>\n    </AnimateSharedLayout>\n  );\n}\n\nexport default AppHeader;\n","import {\n  format,\n  getDaysInMonth,\n  startOfMonth,\n  addMonths,\n  endOfMonth,\n  startOfDay,\n  endOfDay,\n} from 'date-fns';\n\nexport type WeekDay = 'Sun' | 'Mon' | 'Tue' | 'Wed' | 'Thu' | 'Fri' | 'Sat';\n\nexport function getWeekDays(): ReadonlyArray<WeekDay> {\n  return ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'] as const;\n}\n\nexport function getNumberDaysInMonth(date: Date): number {\n  return getDaysInMonth(date);\n}\n\nexport function getWeekDayIndex(day: WeekDay): number {\n  return getWeekDays().findIndex((value) => day === value);\n}\n\nexport function getFirstWeekDayInMonth(date: Date): WeekDay {\n  const startMonth = startOfMonth(date);\n  return getWeekDays()[startMonth.getDay()];\n}\n\nexport function formatToMonthYear(date: Date): string {\n  return format(date, 'MMMM yyyy');\n}\n\nexport function getNextMonth(date: Date): Date {\n  return addMonths(date, 1);\n}\n\nexport function getPreviousMonth(date: Date): Date {\n  return addMonths(date, -1);\n}\n\nexport function getFirstMonthDay(date: Date): Date {\n  return startOfMonth(date);\n}\n\nexport function getEndMonthDay(date: Date): Date {\n  return endOfMonth(date);\n}\n\nexport function getStartOfDay(date: Date): Date {\n  return startOfDay(date);\n}\n\nexport function getEndOfDay(date: Date): Date {\n  return endOfDay(date);\n}\n\nexport function isDateOnDay(date: Date, dayOfMonth: number): boolean {\n  const day = date.getDate();\n  return day === dayOfMonth;\n}\n\nexport function formatSecondsToCounter(totalSeconds: number): string {\n  const minutes = Math.floor(totalSeconds / 60);\n  const seconds = totalSeconds % 60;\n\n  const withLeadingZero = (value: number) => (value < 10 ? `0${value}` : value);\n\n  return `${withLeadingZero(minutes)}:${withLeadingZero(seconds)}`;\n}\n","import {\n  getEndMonthDay,\n  getEndOfDay,\n  getFirstMonthDay,\n  getStartOfDay,\n} from '../../utils/DateTime/WeekDays';\nimport LocalDatabase from './LocalDatabase';\nimport { AudioEntry, AudioEntryHeader } from './types';\n\nexport default class AudioEntriesDb {\n  private readonly database: LocalDatabase;\n\n  constructor(database: LocalDatabase) {\n    this.database = database;\n  }\n\n  async clearAllEntries(): Promise<void> {\n    return this.database.audioEntries\n      .clear()\n      .then(() => this.database.audioData.clear());\n  }\n\n  addEntry(header: AudioEntry): Promise<Date> {\n    return this.database.audioEntries\n      .add({\n        date: header.date,\n        description: header.description,\n        length: header.length,\n      })\n      .then(() =>\n        this.database.audioData.add({ date: header.date, audio: header.audio })\n      );\n  }\n\n  getEntryHeaderByDescription(\n    description: string\n  ): Promise<AudioEntryHeader[]> {\n    return this.database.audioEntries\n      .where('description')\n      .equalsIgnoreCase(description)\n      .toArray();\n  }\n\n  async getEntry(date: Date): Promise<AudioEntry | undefined> {\n    const header = await this.database.audioEntries.get(date);\n    const data = await this.database.audioData.get(date);\n    if (header && data) return { ...header, ...data };\n    return undefined;\n  }\n\n  getAllEntriesDates(): Promise<Date[]> {\n    return this.database.audioEntries.toCollection().primaryKeys();\n  }\n\n  getMonthEntriesHeader(monthDate: Date): Promise<AudioEntryHeader[]> {\n    return this.database.audioEntries\n      .where('date')\n      .between(getFirstMonthDay(monthDate), getEndMonthDay(monthDate))\n      .toArray();\n  }\n\n  getDayEntriesHeader(day: Date): Promise<AudioEntryHeader[]> {\n    return this.database.audioEntries\n      .where('date')\n      .between(getStartOfDay(day), getEndOfDay(day))\n      .toArray();\n  }\n}\n","import Dexie from 'dexie';\nimport { AudioData, AudioEntryHeader, User } from './types';\n\nexport default class LocalDatabase extends Dexie {\n  readonly audioEntries: Dexie.Table<AudioEntryHeader, Date>;\n\n  readonly audioData: Dexie.Table<AudioData, Date>;\n\n  readonly user: Dexie.Table<User, string>;\n\n  constructor() {\n    super('LocalDatabase');\n\n    this.version(1).stores({\n      audioEntries: 'date,description',\n      user: 'name',\n      audioData: 'date',\n    });\n\n    this.user = this.table('user');\n    this.audioEntries = this.table('audioEntries');\n    this.audioData = this.table('audioData');\n  }\n}\n","import { Maybe } from 'purify-ts/Maybe';\nimport { MaybeAsync } from 'purify-ts/MaybeAsync';\n\nexport function getFirst<T>(array: T[]): MaybeAsync<T> {\n  return MaybeAsync.liftMaybe(Maybe.fromFalsy(array[0]));\n}\n\nexport function WithTrace<I, R>(func: (inpu: I) => R, message = '') {\n  return (input: I): R => {\n    console.log(`TRACE:${message} `, input);\n    // debugger;\n    return func(input);\n  };\n}\n","/* eslint-disable no-debugger */\nimport { MaybeAsync } from 'purify-ts/MaybeAsync';\nimport { getFirst } from '../../utils/FunctionalUtils';\nimport LocalDatabase from './LocalDatabase';\nimport { User } from './types';\n\nexport default class UserDb {\n  private readonly database: LocalDatabase;\n\n  constructor(database: LocalDatabase) {\n    this.database = database;\n  }\n\n  clearUser(): MaybeAsync<number> {\n    return MaybeAsync(() => this.database.user.toCollection().delete());\n  }\n\n  getUser(): MaybeAsync<User> {\n    return MaybeAsync(() => this.database.user.toArray()).chain(getFirst);\n  }\n\n  createUser(user: User): MaybeAsync<User> {\n    return this.clearUser().chain(() =>\n      MaybeAsync(() => this.database.user.add(user)).chain(() => this.getUser())\n    );\n  }\n}\n","import AudioEntriesDb from './AudioEntriesDb';\nimport LocalDatabase from './LocalDatabase';\nimport UserDb from './UserDb';\n\nconst localdb = new LocalDatabase();\nlocaldb.open().catch((e) => console.log(e));\n\nconst audiodb = new AudioEntriesDb(localdb);\nexport { audiodb };\n\nconst userdb = new UserDb(localdb);\nexport { userdb };\n","export class AudioController {\n  private audio: HTMLAudioElement;\n\n  constructor() {\n    const audio = document.createElement('audio');\n    audio.preload = 'auto';\n    document.body.append(audio);\n    this.audio = audio;\n  }\n\n  setAudioSource(src: string): void {\n    this.stopPlaying();\n    this.audio.src = src;\n    this.audio.load();\n    this.audio.currentTime = 0;\n  }\n\n  startPlaying(): void {\n    this.audio.play();\n  }\n\n  pausePlaying(): void {\n    this.audio.pause();\n  }\n\n  stopPlaying(): void {\n    this.audio.pause();\n    this.audio.currentTime = 0;\n  }\n\n  seekTo(position: number): void {\n    if (position > 0 && position < this.audio.duration) {\n      this.audio.currentTime = position;\n    }\n  }\n\n  getAudioDuration(): number {\n    const { duration } = this.audio;\n\n    if (Number.isNaN(duration)) return 0;\n    return duration ?? 0;\n  }\n\n  onAudioDurantionChange(func: (newAudioDuration: number) => void): void {\n    this.audio.addEventListener('durationchange', () => {\n      func(this.getAudioDuration());\n    });\n  }\n\n  onAudioPlaybackEnd(func: (endTime: number) => void): void {\n    this.audio.addEventListener('ended', () => {\n      func(this.audio.currentTime);\n    });\n  }\n\n  onCurrentTimeUpdate(\n    func: (newTime: number) => void,\n    updatePeriod = 100\n  ): void {\n    let shouldUpdate = true;\n\n    const callUpdatePeriod = () => {\n      if (shouldUpdate) {\n        func(this.audio.currentTime);\n\n        setTimeout(() => {\n          shouldUpdate = true;\n        }, updatePeriod);\n      }\n      shouldUpdate = false;\n    };\n\n    this.audio.addEventListener('timeupdate', () => {\n      callUpdatePeriod();\n    });\n\n    this.audio.addEventListener('ended', () => {\n      func(this.audio.currentTime);\n    });\n\n    this.audio.addEventListener('seeked', () => {\n      console.log('seedk');\n      func(this.audio.currentTime);\n    });\n  }\n}\n\nconst audio = new AudioController();\nexport default audio;\n","import { createAction, createAsyncThunk } from '@reduxjs/toolkit';\nimport audio from '../AudioController/AudioController';\n\nimport { PlaybackState } from '../state/PlaybackTypes';\n\nexport const loadAudioDuration = createAsyncThunk(\n  'playback/loadAudioDuration',\n  () => {\n    return audio.getAudioDuration();\n  }\n);\n\nexport const changedAudioTime = createAction<number>(\n  'playback/changedAudioTime'\n);\n\nexport const createdAudioUrl = createAsyncThunk(\n  'playback/createdAudioUrl',\n  (audioData: Blob) => {\n    const audioURL = window.URL.createObjectURL(audioData);\n    audio.setAudioSource(audioURL);\n    return audioURL;\n  }\n);\n\nexport const startPlayingRecord = createAsyncThunk(\n  'playback/startPlayingRecord',\n  () => {\n    audio.startPlaying();\n  }\n);\n\nexport const pausePlayingRecord = createAsyncThunk(\n  'playback/pausePlayingRecord',\n  () => {\n    audio.pausePlaying();\n  }\n);\n\nexport const stopPlayingRecord = createAsyncThunk(\n  'playback/stopPlayingRecord',\n  () => {\n    audio.stopPlaying();\n  }\n);\n\nexport const pausePlayButtonClicked = createAsyncThunk(\n  'playback/pausePlayButtonClicked',\n  (_, { dispatch, getState }) => {\n    const {\n      playback: { isPlaying, audioUrl },\n    } = getState() as { playback: PlaybackState };\n\n    if (audioUrl)\n      if (isPlaying) dispatch(pausePlayingRecord());\n      else dispatch(startPlayingRecord());\n  }\n);\n","import { createAsyncThunk } from '@reduxjs/toolkit';\nimport { PromiseTimeout } from '../../../utils/testing/PromiseTimeout';\nimport { audiodb } from '../../Db/Databases';\nimport { AudioEntryHeader } from '../../Db/types';\nimport { createdAudioUrl } from '../../Playback/actions/PlaybackActions';\n\nexport const loadMonthRecordigns = createAsyncThunk<AudioEntryHeader[], Date>(\n  'calendar/loadMonthRecordigns',\n  async (monthDate) => {\n    return audiodb.getMonthEntriesHeader(monthDate);\n  }\n);\n\nexport const selectedDay = createAsyncThunk(\n  'calendar/selectedDay',\n  (day: number) => {\n    return day;\n  }\n);\n\nexport const loadAudioPlayback = createAsyncThunk(\n  'calendar/loadAudioPlayback',\n  async (date: Date, { dispatch }) => {\n    const audioData = await audiodb.getEntry(date);\n    if (audioData) dispatch(createdAudioUrl(audioData.audio));\n  }\n);\n","/* eslint-disable no-param-reassign */\nimport { createReducer } from '@reduxjs/toolkit';\nimport { loadMonthRecordigns, selectedDay } from '../actions/CalendarActions';\nimport { CalendarState } from './CalendarTypes';\n\nexport const InitialCalendarState: CalendarState = {\n  selectedDay: null,\n  recordings: [],\n};\n\nconst CalendarSlice = createReducer(InitialCalendarState, (builder) => {\n  builder\n    .addCase(loadMonthRecordigns.fulfilled, (state, action) => {\n      state.recordings = action.payload;\n    })\n    .addCase(selectedDay.fulfilled, (state, action) => {\n      state.selectedDay = action.payload;\n    });\n});\n\nexport default CalendarSlice;\n","export function AddToCypressWindow(name: string, obj: any) {\n  const windowNotTyped = window as any;\n\n  if (windowNotTyped.Cypress) {\n    windowNotTyped[name] = obj;\n  }\n}\n","import _ from 'lodash';\n\nexport function isBuffersEql(\n  buffer1: ArrayBuffer,\n  buffer2: ArrayBuffer\n): boolean {\n  const data1 = new Uint8Array(buffer1);\n  const data2 = new Uint8Array(buffer2);\n\n  return _.isEqual(data1, data2);\n}\n\nexport function ArrayBufferToStr(data: ArrayBuffer): string {\n  const decoder = new TextDecoder();\n  return decoder.decode(data);\n}\n\nexport function StrToArrayBuffer(data: string): ArrayBuffer {\n  const encoder = new TextEncoder();\n  return encoder.encode(data);\n}\n\nconst splitSeparator = ',';\n\nexport function StrToUint8Array(data: string): Uint8Array {\n  const dataArray = data.split(splitSeparator).map((value) => Number(value));\n  return Uint8Array.from(dataArray);\n}\n\nexport function Uint8ArrayToStr(data: Uint8Array): string {\n  return data.join(splitSeparator);\n}\n","import { curry } from 'purify-ts/Function';\nimport { MaybeAsync } from 'purify-ts/MaybeAsync';\nimport { ArrayBufferToStr } from '../../utils/Buffer/BufferUtils';\n\nexport interface EncryptResult {\n  algorithm: string;\n  iv: Uint8Array;\n  encryptedData: ArrayBuffer;\n}\n\nexport interface Secret {\n  secret: string;\n  salt: Uint8Array;\n}\n\nexport interface KeyParameters {\n  key: CryptoKey;\n  salt: Uint8Array;\n}\n\nexport function Decrypt(\n  crypto: EncryptResult,\n  keyParam: KeyParameters\n): MaybeAsync<ArrayBuffer> {\n  return decryptUsingKey(crypto.encryptedData, crypto.iv, keyParam.key);\n}\n\nexport function Encrypt(\n  data: ArrayBuffer,\n  keyParam: KeyParameters\n): MaybeAsync<EncryptResult> {\n  const iv = GenerateSalt(12);\n\n  return encryptUsingKey(data, iv, keyParam.key).map((encryptedData) => ({\n    algorithm: 'AES-GCM',\n    iv,\n    encryptedData,\n  }));\n}\n\nexport function CreateRandomKey(): MaybeAsync<CryptoKey> {\n  return MaybeAsync(() =>\n    window.crypto.subtle.generateKey(\n      {\n        name: 'AES-GCM',\n        length: 256,\n      },\n      true,\n      ['encrypt', 'decrypt']\n    )\n  );\n}\n\nexport function CryptoKeyToBuffer(key: CryptoKey): MaybeAsync<ArrayBuffer> {\n  return MaybeAsync(() => window.crypto.subtle.exportKey('raw', key));\n}\n\nexport function CryptoKeyToStr(key: CryptoKey): MaybeAsync<string> {\n  return CryptoKeyToBuffer(key).map(ArrayBufferToStr);\n}\n\nexport function GenerateKeyFromSecret(\n  secretParam: Secret\n): MaybeAsync<KeyParameters> {\n  const generateKeyFromSecret = curry(generateKeyFromMaterial);\n\n  return createKeyMaterial(secretParam.secret)\n    .chain(generateKeyFromSecret(secretParam.salt))\n    .map((key) => ({ key, salt: secretParam.salt }));\n}\n\nexport function GenerateSaltForSecret(secret: string): Secret {\n  const salt = GenerateSalt(16);\n  return {\n    salt,\n    secret,\n  };\n}\n\nfunction encryptUsingKey(\n  data: ArrayBuffer,\n  iv: Uint8Array,\n  key: CryptoKey\n): MaybeAsync<ArrayBuffer> {\n  return MaybeAsync(() =>\n    window.crypto.subtle.encrypt(\n      {\n        name: 'AES-GCM',\n        iv,\n      },\n      key,\n      data\n    )\n  );\n}\n\nfunction decryptUsingKey(\n  data: ArrayBuffer,\n  iv: Uint8Array,\n  key: CryptoKey\n): MaybeAsync<ArrayBuffer> {\n  return MaybeAsync(() =>\n    window.crypto.subtle.decrypt(\n      {\n        name: 'AES-GCM',\n        iv,\n      },\n      key,\n      data\n    )\n  );\n}\n\nfunction createKeyMaterial(secret: string): MaybeAsync<CryptoKey> {\n  return MaybeAsync(() => {\n    const encoder = new TextEncoder();\n\n    return window.crypto.subtle.importKey(\n      'raw',\n      encoder.encode(secret),\n      'PBKDF2',\n      false,\n      ['deriveKey']\n    );\n  });\n}\n\nfunction generateKeyFromMaterial(\n  salt: Uint8Array,\n  material: CryptoKey\n): MaybeAsync<CryptoKey> {\n  return MaybeAsync(() =>\n    window.crypto.subtle.deriveKey(\n      {\n        name: 'PBKDF2',\n        salt,\n        iterations: 100000,\n        hash: 'SHA-256',\n      },\n      material,\n      { name: 'AES-GCM', length: 256 },\n      true,\n      ['encrypt', 'decrypt']\n    )\n  );\n}\n\nexport function GenerateSalt(bytes: number): Uint8Array {\n  return window.crypto.getRandomValues(new Uint8Array(bytes));\n}\n","import argon2 from 'argon2-browser';\nimport { MaybeAsync } from 'purify-ts/MaybeAsync';\nimport { ArrayBufferToStr } from '../../utils/Buffer/BufferUtils';\nimport { CryptoKeyToBuffer, GenerateSalt } from './Authenticate';\n\nexport interface Argon2BrowserHashResult {\n  encoded: string;\n  hash: Uint8Array;\n  hashHex: string;\n}\n\nexport function HashKeyToStorage(\n  key: CryptoKey\n): MaybeAsync<Argon2BrowserHashResult> {\n  const salt = GenerateSalt(16);\n  return CryptoKeyToBuffer(key)\n    .map(ArrayBufferToStr)\n    .chain((keydata) => argon2Hash(keydata, salt));\n}\n\nexport function VerifyHash(\n  key: CryptoKey | string,\n  encodedKey: string\n): MaybeAsync<void> {\n  if (typeof key === 'string') return argon2Verify(key, encodedKey);\n\n  return CryptoKeyToBuffer(key)\n    .map(ArrayBufferToStr)\n    .chain((keyStr) => argon2Verify(keyStr, encodedKey));\n}\n\nfunction argon2Verify(password: string, encodedKey: string) {\n  return MaybeAsync(() =>\n    argon2.verify({\n      pass: password,\n      encoded: encodedKey,\n      type: argon2.ArgonType.Argon2id,\n    })\n  );\n}\n\nfunction argon2Hash(keyData: string, salt: Uint8Array) {\n  return MaybeAsync(() =>\n    argon2.hash({\n      pass: keyData,\n      salt,\n      type: argon2.ArgonType.Argon2id,\n    })\n  );\n}\n","import { MaybeAsync } from 'purify-ts/MaybeAsync';\nimport {\n  StrToUint8Array,\n  Uint8ArrayToStr,\n} from '../../utils/Buffer/BufferUtils';\n\nimport {\n  GenerateKeyFromSecret,\n  GenerateSaltForSecret,\n  KeyParameters,\n  Secret,\n} from '../Crypto/Authenticate';\nimport {\n  Argon2BrowserHashResult,\n  HashKeyToStorage,\n  VerifyHash,\n} from '../Crypto/HashStorage';\nimport { LoginKey, User } from '../Db/types';\n\nexport function AuthenticateUser(\n  user: User,\n  password: string\n): MaybeAsync<CryptoKey> {\n  const {\n    loginKey: { salt, encodedKey },\n  } = user;\n\n  const secret: Secret = {\n    salt: StrToUint8Array(salt),\n    secret: password,\n  };\n\n  return GenerateKeyFromSecret(secret).chain((keyParam) =>\n    VerifyHash(keyParam.key, encodedKey).map(() => keyParam.key)\n  );\n}\n\nexport function CreateNewUser(\n  name: string,\n  password: string\n): MaybeAsync<User> {\n  const secret = GenerateSaltForSecret(password);\n\n  return GenerateKeyFromSecret(secret)\n    .chain(hashKey)\n    .map((loginKey) => createUser(name, loginKey));\n}\n\nfunction createUser(name: string, loginKey: LoginKey): User {\n  return { name, loginKey };\n}\n\nfunction hashKey(keyParam: KeyParameters): MaybeAsync<LoginKey> {\n  const salt = Uint8ArrayToStr(keyParam.salt);\n  const hashedKey = HashKeyToStorage(keyParam.key);\n\n  return buildLoginKey(salt, hashedKey);\n}\n\nfunction buildLoginKey(\n  salt: string,\n  encodedKey: MaybeAsync<Argon2BrowserHashResult>\n): MaybeAsync<LoginKey> {\n  return encodedKey.map((result) => ({\n    encodedKey: result.encoded,\n    salt,\n  }));\n}\n","import { AddToCypressWindow } from '../../utils/testing/CypressUtils';\nimport { CryptoKeyToStr } from '../Crypto/Authenticate';\nimport { userdb } from '../Db/Databases';\nimport { User } from '../Db/types';\nimport UserDb from '../Db/UserDb';\nimport { AuthenticateUser, CreateNewUser } from './Login';\n\nexport class AuthSession {\n  private storage: Storage;\n\n  private users: UserDb;\n\n  private readonly authInfo = 'authInfo';\n\n  constructor(storage: Storage, users: UserDb) {\n    this.storage = storage;\n    this.users = users;\n  }\n\n  private getAuthSession() {\n    return this.storage.getItem(this.authInfo);\n  }\n\n  private setAuthSession(sessionInfo: string) {\n    this.storage.setItem(this.authInfo, sessionInfo);\n  }\n\n  isAuthenticated(): boolean {\n    return this.getAuthSession() !== null;\n  }\n\n  // getUserKey(): MaybeAsync<CryptoKey> {\n  // //  return this.getAuthSession();\n  // // TODO create function to convert string to crypto key\n  // }\n\n  authenticate(password: string): Promise<boolean> {\n    return this.users\n      .getUser()\n      .chain((user) => AuthenticateUser(user, password))\n      .chain(CryptoKeyToStr)\n      .ifJust((key) => this.setAuthSession(key))\n      .run()\n      .then((result) => result.isJust());\n  }\n\n  createNewUser(name: string, password: string): Promise<User | null> {\n    return CreateNewUser(name, password)\n      .chain((user) => this.users.createUser(user))\n      .run()\n      .then((maybe) => maybe.extractNullable());\n  }\n}\n\nconst authSession = new AuthSession(window.sessionStorage, userdb);\nAddToCypressWindow('authSession', authSession);\n\nexport default authSession;\n","/* eslint-disable no-param-reassign */\nimport {\n  ActionReducerMapBuilder,\n  AnyAction,\n  AsyncThunk,\n} from '@reduxjs/toolkit';\n\nexport enum AsyncActionStatus {\n  Completed,\n  Pending,\n  NotStarted,\n  Rejected,\n}\n\nexport function AsyncActionStatusToStr(\n  actionStatus: AsyncActionStatus\n): string {\n  switch (actionStatus) {\n    case AsyncActionStatus.Completed:\n      return 'Completed';\n    case AsyncActionStatus.Pending:\n      return 'Pending';\n    case AsyncActionStatus.NotStarted:\n      return 'NotStarted';\n    case AsyncActionStatus.Rejected:\n      return 'Rejected';\n    default:\n      return 'Error';\n  }\n}\n\ntype GenericAsyncThunk = AsyncThunk<unknown, unknown, any>;\ntype PendingAction = ReturnType<GenericAsyncThunk['pending']>;\ntype RejectedAction = ReturnType<GenericAsyncThunk['rejected']>;\ntype FulfilledAction = ReturnType<GenericAsyncThunk['fulfilled']>;\n\nexport function isPendingAction(action: AnyAction): action is PendingAction {\n  return action.type.endsWith('/pending');\n}\n\nexport function isRejectedAction(action: AnyAction): action is RejectedAction {\n  return action.type.endsWith('/rejected');\n}\n\nexport function isFulfilledAction(\n  action: AnyAction\n): action is FulfilledAction {\n  return action.type.endsWith('/fulfilled');\n}\n\nexport function addPendingMatcher(\n  fieldInSlice: string,\n  actionName: string\n): [\n  (action: AnyAction) => action is PendingAction,\n  (state: any, action: PendingAction) => void\n] {\n  return [\n    isPendingAction,\n    (state, action) => {\n      if (action.type.includes(actionName) && state && state[fieldInSlice]) {\n        state[fieldInSlice] = AsyncActionStatus.Pending;\n      }\n    },\n  ];\n}\n\nexport function addRejectedMatcher(\n  fieldInSlice: string,\n  actionName: string\n): [\n  (action: AnyAction) => action is RejectedAction,\n  (state: any, action: RejectedAction) => void\n] {\n  return [\n    isRejectedAction,\n    (state, action) => {\n      if (action.type.includes(actionName) && state && state[fieldInSlice]) {\n        state[fieldInSlice] = AsyncActionStatus.Rejected;\n      }\n    },\n  ];\n}\n\nexport function addFulfilledMatcher(\n  fieldInSlice: string,\n  actionName: string\n): [\n  (action: AnyAction) => action is FulfilledAction,\n  (state: any, action: FulfilledAction) => void\n] {\n  return [\n    isFulfilledAction,\n    (state, action) => {\n      if (action.type.includes(actionName) && state && state[fieldInSlice]) {\n        state[fieldInSlice] = AsyncActionStatus.Completed;\n        if (typeof action.payload === 'boolean')\n          if (action.payload === false)\n            state[fieldInSlice] = AsyncActionStatus.Rejected;\n      }\n    },\n  ];\n}\n\nexport function addDefaultAsyncMatcher(\n  builder: ActionReducerMapBuilder<unknown>,\n  fieldInSlice: string,\n  actionName: string\n): void {\n  builder\n    .addMatcher(...addPendingMatcher(fieldInSlice, actionName))\n    .addMatcher(...addFulfilledMatcher(fieldInSlice, actionName))\n    .addMatcher(...addRejectedMatcher(fieldInSlice, actionName));\n}\n","import { createAsyncThunk } from '@reduxjs/toolkit';\nimport authSession from '../../modules/Authentication/AuthSession';\nimport { UserState } from '../../modules/Authentication/state/UserTypes';\nimport { userdb } from '../../modules/Db/Databases';\nimport { AsyncActionStatus } from '../../utils/ReduxUtils/AsyncActionHelpers';\nimport { AddToCypressWindow } from '../../utils/testing/CypressUtils';\n\nexport const loadInitialUserState = createAsyncThunk<UserState | null>(\n  'user/loadInitialState',\n  async () => {\n    const userJust = await userdb.getUser().run();\n    const user = userJust.extract();\n    const isLoggedIn = authSession.isAuthenticated();\n\n    if (user) {\n      return {\n        isLoggedIn: isLoggedIn\n          ? AsyncActionStatus.Completed\n          : AsyncActionStatus.NotStarted,\n        isUserCreated: AsyncActionStatus.Completed,\n        name: user.name,\n        isLoadingInitialState: false,\n      };\n    }\n\n    return null;\n  }\n);\n\nAddToCypressWindow('loadInitialUserState', loadInitialUserState);\n","/* eslint-disable no-param-reassign */\nimport { createReducer } from '@reduxjs/toolkit';\nimport { loadInitialUserState } from '../../../app/LoadInitialState/LoadInitialStateActions';\nimport {\n  addDefaultAsyncMatcher,\n  AsyncActionStatus,\n} from '../../../utils/ReduxUtils/AsyncActionHelpers';\n\nimport { UserState } from './UserTypes';\n\nexport const InitialUserState: UserState = {\n  isLoggedIn: AsyncActionStatus.NotStarted,\n  isUserCreated: AsyncActionStatus.NotStarted,\n  isLoadingInitialState: true,\n  name: '',\n};\n\nconst UserSlice = createReducer(InitialUserState, (builder) => {\n  builder.addCase(\n    loadInitialUserState.fulfilled,\n    (state, action): UserState => {\n      const initialState = action.payload;\n      if (initialState) return initialState;\n\n      return { ...state, isLoadingInitialState: false };\n    }\n  );\n  addDefaultAsyncMatcher(builder, 'isLoggedIn', 'loginUser');\n  addDefaultAsyncMatcher(builder, 'isUserCreated', 'createNewUser');\n});\n\nexport default UserSlice;\n","export enum MicAvailability {\n  Available,\n  NotAvailable,\n  Pending,\n}\n\nexport interface RecordState {\n  isRecording: boolean;\n  isMicrophoneAvailable: MicAvailability;\n}\n","/* eslint-disable no-param-reassign */\nimport { createReducer } from '@reduxjs/toolkit';\nimport {\n  changedAudioTime,\n  createdAudioUrl,\n  loadAudioDuration,\n  pausePlayingRecord,\n  startPlayingRecord,\n  stopPlayingRecord,\n} from '../actions/PlaybackActions';\nimport { PlaybackState } from './PlaybackTypes';\n\nexport const InitialPlaybackState: PlaybackState = {\n  audioUrl: '',\n  isPlaying: false,\n  audioDuration: 0,\n  currentAudioTime: 0,\n};\n\nconst PlaybackSlice = createReducer(InitialPlaybackState, (builder) =>\n  builder\n    .addCase(createdAudioUrl.fulfilled, (state, action) => {\n      state.audioUrl = action.payload;\n    })\n    .addCase(startPlayingRecord.fulfilled, (state) => {\n      state.isPlaying = true;\n    })\n    .addCase(pausePlayingRecord.fulfilled, (state) => {\n      state.isPlaying = false;\n    })\n    .addCase(stopPlayingRecord.fulfilled, (state) => {\n      state.isPlaying = false;\n    })\n    .addCase(loadAudioDuration.fulfilled, (state, action) => {\n      state.audioDuration = action.payload;\n    })\n    .addCase(changedAudioTime, (state, action) => {\n      state.currentAudioTime = action.payload;\n    })\n);\n\nexport default PlaybackSlice;\n","import { createAsyncThunk } from '@reduxjs/toolkit';\nimport { audiodb } from '../Databases';\nimport { AudioEntry } from '../types';\n\nexport const saveRecordInDb = createAsyncThunk<void, Blob>(\n  'db/saveRecordInDb',\n  (audioData: Blob) => {\n    const entry: AudioEntry = {\n      date: new Date(),\n      description: 'none yet',\n      length: 20,\n      audio: audioData,\n    };\n    audiodb.addEntry(entry);\n  }\n);\n","// TODO - add error handling\nexport default class MicrophoneController {\n  private readonly mediaRecorder: MediaRecorder;\n\n  private dataChunks: Blob[];\n\n  constructor(mediaRecorder: MediaRecorder) {\n    this.mediaRecorder = mediaRecorder;\n    this.dataChunks = new Array<Blob>();\n\n    this.mediaRecorder.ondataavailable = (event: BlobEvent) => {\n      this.dataChunks.push(event.data);\n    };\n\n    this.mediaRecorder.onerror = (event) => console.log(event);\n  }\n\n  start(): void {\n    this.dataChunks = new Array<Blob>();\n    this.mediaRecorder.start();\n  }\n\n  stop(): Promise<Blob> {\n    const stopPromise = new Promise<Blob>((resolve) => {\n      this.mediaRecorder.onstop = () => {\n        resolve(this.getRecordedData());\n      };\n    });\n\n    this.mediaRecorder.stop();\n\n    return stopPromise;\n  }\n\n  getRecordedData(): Blob {\n    const blob = new Blob(this.dataChunks, {\n      type: this.mediaRecorder.mimeType,\n    });\n    return blob;\n  }\n}\n","import MicrophoneController from './MicController';\n\nexport class Microphone {\n  private microphoneController: MicrophoneController | null = null;\n\n  async askForUserPermission(): Promise<void> {\n    if (this.microphoneController) return;\n\n    const microphoneStream = await navigator.mediaDevices.getUserMedia({\n      audio: true,\n    });\n\n    const media = new MediaRecorder(microphoneStream, {\n      mimeType: 'audio/ogg; codecs=opus',\n    });\n    this.microphoneController = new MicrophoneController(media);\n  }\n\n  startRecording(): void {\n    if (this.microphoneController) this.microphoneController.start();\n  }\n\n  async stopRecording(): Promise<Blob | null> {\n    if (!this.microphoneController) return null;\n    return this.microphoneController.stop();\n  }\n}\n\nconst microphone = new Microphone();\nexport default microphone;\n","import { AsyncThunk, createAsyncThunk } from '@reduxjs/toolkit';\nimport { saveRecordInDb } from '../Db/actions/AudioDbActions';\nimport { createdAudioUrl } from '../Playback/actions/PlaybackActions';\n\nimport microphone from './Microphone/Microphone';\nimport { MicAvailability, RecordState } from './state/RecordTypes';\n\nexport const askForMicrophonePermission = createAsyncThunk(\n  'record/askForMicrophonePermission',\n  async () => {\n    await microphone.askForUserPermission();\n  }\n);\n\nexport const startRecording = createAsyncThunk(\n  'record/startRecording',\n  async () => {\n    microphone.startRecording();\n  }\n);\n\nexport const stopRecording = createAsyncThunk(\n  'record/stopRecording',\n  async (_, { dispatch }) => {\n    const audioData = await microphone.stopRecording();\n\n    if (audioData) {\n      dispatch(createdAudioUrl(audioData));\n      dispatch(saveRecordInDb(audioData));\n    }\n  }\n);\n\nexport const recordButtonClicked = createAsyncThunk(\n  'record/recordButtonClicked',\n  async (_, { dispatch, getState }) => {\n    const {\n      record: { isMicrophoneAvailable, isRecording },\n    } = getState() as { record: RecordState };\n\n    const nextState = calculateNextRecordAction(\n      isMicrophoneAvailable,\n      isRecording\n    );\n\n    if (nextState) dispatch(nextState());\n  }\n);\n\nexport function calculateNextRecordAction(\n  isMicrophoneAvailable: MicAvailability,\n  isRecording: boolean\n): AsyncThunk<void, void, {}> | null {\n  if (isRecording) return stopRecording;\n\n  if (isMicrophoneAvailable === MicAvailability.NotAvailable) {\n    return askForMicrophonePermission;\n  }\n\n  if (isMicrophoneAvailable === MicAvailability.Available) {\n    return startRecording;\n  }\n\n  return null;\n}\n","/* eslint-disable no-param-reassign */\nimport { createSlice } from '@reduxjs/toolkit';\nimport {\n  askForMicrophonePermission,\n  startRecording,\n  stopRecording,\n} from '../RecordActions';\nimport { MicAvailability, RecordState } from './RecordTypes';\n\nexport const InitialRecordState: RecordState = {\n  isRecording: false,\n  isMicrophoneAvailable: MicAvailability.NotAvailable,\n};\n\nconst RecordSlice = createSlice({\n  name: 'record',\n  initialState: InitialRecordState,\n  reducers: {},\n\n  extraReducers: (builder) =>\n    builder\n      .addCase(askForMicrophonePermission.fulfilled, (state) => {\n        state.isMicrophoneAvailable = MicAvailability.Available;\n      })\n      .addCase(askForMicrophonePermission.rejected, (state) => {\n        state.isMicrophoneAvailable = MicAvailability.NotAvailable;\n      })\n      .addCase(askForMicrophonePermission.pending, (state) => {\n        state.isMicrophoneAvailable = MicAvailability.Pending;\n      })\n      .addCase(startRecording.fulfilled, (state) => {\n        state.isRecording = true;\n      })\n      .addCase(stopRecording.fulfilled, (state) => {\n        state.isRecording = false;\n      }),\n});\n\nexport default RecordSlice.reducer;\n","import { combineReducers, configureStore } from '@reduxjs/toolkit';\nimport { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport CalendarSlice, {\n  InitialCalendarState,\n} from '../modules/Calendar/store/CalendarSlice';\nimport UserSlice, {\n  InitialUserState,\n} from '../modules/Authentication/state/UserSlice';\nimport PlaybackSlice, {\n  InitialPlaybackState,\n} from '../modules/Playback/state/PlaybackSlice';\nimport RecordSlice, {\n  InitialRecordState,\n} from '../modules/Recording/state/RecordSlice';\nimport { AddToCypressWindow } from '../utils/testing/CypressUtils';\n\nconst rootReducer = combineReducers({\n  record: RecordSlice,\n  playback: PlaybackSlice,\n  user: UserSlice,\n  calendar: CalendarSlice,\n});\n\nexport type AppState = ReturnType<typeof rootReducer>;\n\nconst AppInitialState: AppState = {\n  calendar: InitialCalendarState,\n  record: InitialRecordState,\n  playback: InitialPlaybackState,\n  user: InitialUserState,\n};\n\nexport function CreateStore(partialState?: Partial<AppState>) {\n  const appInitialState = {\n    ...AppInitialState,\n    ...partialState,\n  };\n\n  return configureStore({\n    reducer: rootReducer,\n    preloadedState: appInitialState,\n  });\n}\n\nconst store = CreateStore();\nexport default store;\n\nexport type AppDispatch = typeof store.dispatch;\nexport const useTypedDispatch = () => useDispatch<AppDispatch>();\n\nexport const useTypedSelector: TypedUseSelectorHook<AppState> = useSelector;\n\n// Dispatch actions from cypress\nAddToCypressWindow('store', store);\n","import { AppState } from '../../../app/Store';\n\nexport const selectIsUserCreated = (state: AppState) =>\n  state.user.isUserCreated;\n\nexport const selectIsLoadingInitialState = (state: AppState) =>\n  state.user.isLoadingInitialState;\n\nexport const selectIsUserLoggedIn = (state: AppState) => state.user.isLoggedIn;\n","import React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useTypedSelector } from '../../app/Store';\nimport { AsyncActionStatus } from '../../utils/ReduxUtils/AsyncActionHelpers';\nimport { selectIsUserLoggedIn } from './state/UserSelectors';\n\nexport function OnlyLoggedIn({\n  children,\n  redirect = true,\n}: {\n  redirect?: boolean;\n  children: React.ReactNode;\n}): JSX.Element {\n  const isUsedloggedIn = useTypedSelector(selectIsUserLoggedIn);\n\n  return (\n    <>\n      {isUsedloggedIn === AsyncActionStatus.Completed\n        ? children\n        : redirect && <Navigate to=\"/login\" replace />}\n    </>\n  );\n}\n","import { createSelector } from '@reduxjs/toolkit';\nimport { AppState } from '../../../app/Store';\n\nexport const selectAudioUrl = (state: AppState) => state.playback.audioUrl;\n\nexport const selectIsPlaying = (state: AppState) => state.playback.isPlaying;\n\nexport const selectAudioDuration = (state: AppState) =>\n  state.playback.audioDuration;\n\nexport const selectCurrentAudioTime = (state: AppState) =>\n  state.playback.currentAudioTime;\n\nexport const selectCurrentAudioCompletedPercentage = createSelector(\n  selectCurrentAudioTime,\n  selectAudioDuration,\n  (currentTime, audioDuration) => (currentTime / audioDuration) * 100\n);\n","import React from 'react';\nimport {\n  Slider,\n  SliderFilledTrack,\n  SliderTrack,\n  SliderThumb,\n  Text,\n  HStack,\n} from '@chakra-ui/react';\nimport { useTypedSelector } from '../../../app/Store';\nimport {\n  selectAudioDuration,\n  selectCurrentAudioCompletedPercentage,\n  selectCurrentAudioTime,\n} from '../state/PlaybackSelectors';\n\nimport audio from '../AudioController/AudioController';\n\nfunction seekAudioTo(sliderValue: number): void {\n  const duration = audio.getAudioDuration();\n  const seekPosition = duration * (sliderValue / 100);\n  audio.seekTo(seekPosition);\n}\n\nfunction AudioSlider(): JSX.Element {\n  const audioDuration = useTypedSelector(selectAudioDuration);\n\n  const audioPercentage = useTypedSelector(\n    selectCurrentAudioCompletedPercentage\n  );\n\n  const currentPosition = useTypedSelector(selectCurrentAudioTime);\n\n  return (\n    <HStack spacing={3}>\n      <Text fontSize=\"2xl\">{currentPosition.toFixed(2)}</Text>\n\n      <Slider\n        aria-label=\"AudioPlaybackSlider\"\n        defaultValue={0}\n        value={audioPercentage}\n        focusThumbOnChange={false}\n        onChange={(value) => {\n          seekAudioTo(value);\n        }}\n      >\n        <SliderTrack>\n          <SliderFilledTrack />\n        </SliderTrack>\n        <SliderThumb />\n      </Slider>\n\n      <Text fontSize=\"2xl\">{audioDuration.toFixed(2)}</Text>\n    </HStack>\n  );\n}\n\nexport default AudioSlider;\n","import React from 'react';\nimport { Grid, GridItem, Icon, IconButton } from '@chakra-ui/react';\nimport {\n  MdForward10,\n  MdReplay10,\n  MdStop,\n  MdPlayArrow,\n  MdPause,\n} from 'react-icons/md';\nimport { useTypedDispatch, useTypedSelector } from '../../../app/Store';\n\nimport { selectIsPlaying } from '../state/PlaybackSelectors';\nimport {\n  pausePlayButtonClicked,\n  stopPlayingRecord,\n} from '../actions/PlaybackActions';\nimport AudioSlider from './AudioSlider';\n\nfunction AudioPlayer(): JSX.Element {\n  const dispatch = useTypedDispatch();\n  const isPlaying = useTypedSelector(selectIsPlaying);\n\n  return (\n    <Grid\n      p={[3, 3, 4, 5]}\n      templateColumns=\"1fr repeat(3, auto) 1fr\"\n      justifyItems=\"center\"\n      alignItems=\"center\"\n      justifyContent=\"center\"\n      alignContent=\"center\"\n    >\n      <GridItem colStart={2}>\n        <IconButton\n          isRound\n          colorScheme=\"green\"\n          aria-label=\"Forward\"\n          size=\"md\"\n          mx={2}\n          icon={<Icon boxSize={6} as={MdForward10} />}\n        />\n      </GridItem>\n      <GridItem>\n        <IconButton\n          isRound\n          colorScheme=\"green\"\n          aria-label=\"PlayPause\"\n          size=\"lg\"\n          mx={['0.5', '1.5', '2.5', '3']}\n          icon={\n            isPlaying ? (\n              <Icon boxSize={8} as={MdPause} />\n            ) : (\n              <Icon boxSize={8} as={MdPlayArrow} />\n            )\n          }\n          onClick={() => {\n            dispatch(pausePlayButtonClicked());\n          }}\n        />\n      </GridItem>\n      <GridItem>\n        <IconButton\n          isRound\n          colorScheme=\"green\"\n          aria-label=\"Rewind\"\n          size=\"md\"\n          mx={2}\n          icon={<Icon boxSize={6} as={MdReplay10} />}\n        />\n      </GridItem>\n      <GridItem>\n        <IconButton\n          isRound\n          marginLeft={['4', '5', '12']}\n          colorScheme=\"red\"\n          aria-label=\"Stop\"\n          size=\"sm\"\n          icon={<Icon boxSize={4} as={MdStop} />}\n          onClick={() => {\n            dispatch(stopPlayingRecord());\n          }}\n        />\n      </GridItem>\n\n      <GridItem width=\"100%\" colSpan={5} px={5}>\n        <AudioSlider />\n      </GridItem>\n    </Grid>\n  );\n}\n\nexport default AudioPlayer;\n","import React from 'react';\n\nimport AudioPlayer from './components/AudioPlayer';\n\nfunction PlaybackPanel(): JSX.Element {\n  return <AudioPlayer />;\n}\n\nexport default PlaybackPanel;\n","import React from 'react';\n\nimport { Box, BoxProps } from '@chakra-ui/react';\nimport { HTMLMotionProps, motion } from 'framer-motion';\n\nconst MotionBoxChakra = motion(Box);\n\nexport default function MotionBox({\n  children,\n  ...props\n}: BoxProps & HTMLMotionProps<'div'>): JSX.Element {\n  return (\n    <>\n      <MotionBoxChakra {...props}>{children}</MotionBoxChakra>\n    </>\n  );\n}\n","import React from 'react';\n\nimport { AspectRatio, Text } from '@chakra-ui/react';\nimport MotionBox from '../../../components/Motion/MotionBox';\nimport MotionCenter from '../../../components/Motion/MotionCenter';\nimport { useTypedDispatch } from '../../../app/Store';\nimport { selectedDay } from '../actions/CalendarActions';\n\nexport interface TileProps {\n  dayNumber?: number;\n  recordsNumber?: number;\n}\n\nconst Tile: React.FC<TileProps> = ({ dayNumber, recordsNumber = 0 }) => {\n  const dispatch = useTypedDispatch();\n\n  const addTileRecordDecoration = (\n    numberOfRecords: number,\n    element: JSX.Element | null\n  ) => {\n    if (numberOfRecords > 0)\n      return (\n        <MotionCenter\n          bgColor=\"blue.800\"\n          width=\"30%\"\n          height=\"30%\"\n          borderRadius=\"50%\"\n          whileHover={{ scale: 1.2 }}\n        >\n          <MotionCenter\n            bgColor=\"blue.300\"\n            width=\"60%\"\n            height=\"60%\"\n            borderRadius=\"50%\"\n            whileHover={{ scale: 1.5 }}\n          >\n            {element}\n          </MotionCenter>\n        </MotionCenter>\n      );\n\n    return element;\n  };\n\n  return (\n    <AspectRatio ratio={1}>\n      <MotionBox\n        boxSize=\"100%\"\n        bgColor=\"gray.700\"\n        whileTap={{ scale: 0.8 }}\n        whileHover={{ scale: 1.2 }}\n        onClick={() => {\n          if (dayNumber) dispatch(selectedDay(dayNumber));\n        }}\n      >\n        {addTileRecordDecoration(\n          recordsNumber,\n          <Text textAlign=\"center\">{dayNumber}</Text>\n        )}\n      </MotionBox>\n    </AspectRatio>\n  );\n};\n\nexport default Tile;\n","import React from 'react';\nimport { SimpleGrid, Text } from '@chakra-ui/react';\nimport Tile from '../Tile/Tile';\nimport {\n  getWeekDayIndex,\n  getWeekDays,\n  WeekDay,\n} from '../../../utils/DateTime/WeekDays';\nimport MotionBox from '../../../components/Motion/MotionBox';\n\nexport type RecordInDays = {\n  [dayNumber: number]: number;\n};\n\nexport interface CalendarMonthProps {\n  numberOfDays: number;\n  startAtDay: WeekDay;\n  recordsDays: RecordInDays;\n}\n\nconst CalendarMonth: React.FC<CalendarMonthProps> = ({\n  numberOfDays,\n  startAtDay,\n  recordsDays,\n}) => {\n  const tiles = Array.from(Array(numberOfDays).keys(), (key) => key + 1).map(\n    (day) => <Tile dayNumber={day} recordsNumber={recordsDays[day]} />\n  );\n\n  const weekDayOffset = getWeekDayIndex(startAtDay);\n  const tilesOffset = new Array(weekDayOffset).fill(0).map(() => <Tile />);\n\n  const weekDays = getWeekDays();\n  const weekDaysTitles = weekDays.map((day) => (\n    <Text bgColor=\"blue.600\" textAlign=\"center\">\n      {day}\n    </Text>\n  ));\n\n  return (\n    <>\n      <MotionBox\n        initial={{ x: '-25vw' }}\n        animate={{\n          x: 0,\n          transition: { type: 'spring', bounce: 0.5 },\n        }}\n      >\n        <SimpleGrid\n          width=\"100%\"\n          columns={7}\n          spacingX={[2, 3, 5, 5]}\n          spacingY={[2, 2, 3, 3]}\n        >\n          {weekDaysTitles}\n          {tilesOffset}\n\n          {tiles}\n        </SimpleGrid>\n      </MotionBox>\n    </>\n  );\n};\n\nexport default CalendarMonth;\n","import React from 'react';\n\nimport { motion } from 'framer-motion';\nimport { Button, ButtonProps } from '@chakra-ui/react';\n\nconst MotionButton = motion(Button);\n\nexport default function MonthButton({\n  children,\n  ...props\n}: ButtonProps): JSX.Element {\n  return (\n    <MotionButton\n      colorScheme=\"gray\"\n      whileHover={{ scale: 1.1 }}\n      whileTap={{ scale: 0.6, transition: { duration: 0.1 } }}\n      {...props}\n    >\n      {children}\n    </MotionButton>\n  );\n}\n","import React from 'react';\nimport { Box, Center, Heading, HStack, Text } from '@chakra-ui/react';\nimport {\n  formatToMonthYear,\n  getFirstWeekDayInMonth,\n  getNumberDaysInMonth,\n} from '../../utils/DateTime/WeekDays';\nimport CalendarMonth, { RecordInDays } from './MonthCalendar/CalendarMonth';\nimport MonthButton from './MonthCalendar/MonthButton';\nimport MotionBox from '../../components/Motion/MotionBox';\n\nexport interface CalendarProps {\n  date: Date;\n  onNextMonth: () => void;\n  onPreviousMonth: () => void;\n  recordingDays: RecordInDays;\n}\n\nconst Calendar: React.FC<CalendarProps> = ({\n  date,\n  onNextMonth,\n  onPreviousMonth,\n  recordingDays = {},\n}) => {\n  const daysInMonth = getNumberDaysInMonth(date);\n  const firstDayInMonth = getFirstWeekDayInMonth(date);\n  const monthTitle = formatToMonthYear(date);\n\n  return (\n    <Box boxSize=\"100%\">\n      <HStack justify=\"center\" spacing={8} marginBottom={4}>\n        <MonthButton\n          aria-label=\"PreviousMonth\"\n          onClick={() => onPreviousMonth()}\n        >\n          <Text textAlign=\"center\">{'<'}</Text>\n        </MonthButton>\n\n        <Center>\n          <MotionBox\n            key={`CalendarTitle_${monthTitle}`}\n            initial={{ scaleY: 0 }}\n            animate={{ scaleY: 1 }}\n          >\n            <Heading textAlign=\"center\">{monthTitle}</Heading>\n          </MotionBox>\n        </Center>\n\n        <MonthButton aria-label=\"NextMonth\" onClick={() => onNextMonth()}>\n          <Text textAlign=\"center\">{'>'}</Text>\n        </MonthButton>\n      </HStack>\n\n      <CalendarMonth\n        key={`CalendarMonth_${monthTitle}`}\n        numberOfDays={daysInMonth}\n        startAtDay={firstDayInMonth}\n        recordsDays={recordingDays}\n      />\n    </Box>\n  );\n};\n\nexport default Calendar;\n","import { Box, Center } from '@chakra-ui/react';\nimport React from 'react';\nimport { useTypedDispatch } from '../../../app/Store';\nimport MotionBox from '../../../components/Motion/MotionBox';\nimport { AudioEntryHeader } from '../../Db/types';\nimport { loadAudioPlayback } from '../actions/CalendarActions';\n\nfunction RecordingItemDisplay({\n  audioEntry,\n}: {\n  audioEntry: AudioEntryHeader;\n}): JSX.Element {\n  const dispatch = useTypedDispatch();\n  return (\n    <Center width=\"100%\">\n      <MotionBox\n        as=\"button\"\n        width=\"100%\"\n        borderWidth=\"1px\"\n        borderRadius=\"lg\"\n        textAlign=\"center\"\n        whileHover={{ backgroundColor: '#2a4365' }}\n        whileTap={{ scale: 0.85 }}\n        initial={{ scale: 0 }}\n        animate={{\n          scale: 1,\n          transition: { duration: 0.2, ease: 'circOut' },\n        }}\n        p=\"2\"\n        onClick={() => dispatch(loadAudioPlayback(audioEntry.date))}\n      >\n        <Box\n          mt=\"1\"\n          fontWeight=\"semibold\"\n          as=\"h4\"\n          lineHeight=\"tight\"\n          isTruncated\n        >\n          {`${audioEntry.date.toLocaleTimeString()}`}\n        </Box>\n        <Box\n          color=\"gray.500\"\n          fontWeight=\"semibold\"\n          letterSpacing=\"wide\"\n          fontSize=\"xs\"\n          textTransform=\"uppercase\"\n          ml=\"2\"\n        >\n          {`${audioEntry.description} ${audioEntry.length}s`}\n        </Box>\n      </MotionBox>\n    </Center>\n  );\n}\n\nexport default RecordingItemDisplay;\n","import { Text, Center, StackDivider, VStack } from '@chakra-ui/react';\nimport React from 'react';\nimport { AudioEntryHeader } from '../../Db/types';\nimport RecordingItemDisplay from './RecordingItemDisplay';\n\ninterface DayRecordingsDisplayProps {\n  dayRecordingHeaders: Array<AudioEntryHeader>;\n}\n\nfunction DayRecordingsDisplay({\n  dayRecordingHeaders,\n}: DayRecordingsDisplayProps): JSX.Element {\n  return (\n    <VStack\n      divider={<StackDivider borderColor=\"gray.200\" />}\n      spacing={4}\n      align=\"stretch\"\n    >\n      <Center\n        mt=\"1\"\n        fontWeight=\"semibold\"\n        as=\"h2\"\n        lineHeight=\"tight\"\n        isTruncated\n      >\n        <Text fontSize=\"3xl\">{`${dayRecordingHeaders[0].date.toLocaleDateString()}`}</Text>\n      </Center>\n      {dayRecordingHeaders.map((recording) => (\n        <RecordingItemDisplay\n          key={recording.date.toString()}\n          audioEntry={recording}\n        />\n      ))}\n    </VStack>\n  );\n}\n\nexport default DayRecordingsDisplay;\n","import { createSelector } from '@reduxjs/toolkit';\nimport { AppState } from '../../../app/Store';\nimport { isDateOnDay } from '../../../utils/DateTime/WeekDays';\n\nexport const selectRecording = (state: AppState) => state.calendar.recordings;\n\nexport const selectSelectedDay = (state: AppState) =>\n  state.calendar.selectedDay;\n\nexport const selectMonthRecordingObject = createSelector(\n  selectRecording,\n  (recordings) =>\n    recordings\n      .map((recording) => recording.date.getDate())\n      .reduce((recordingObj, day) => ({ [day]: 1, ...recordingObj }), {})\n);\n\nexport const selectDayRecordingHeaders = createSelector(\n  selectRecording,\n  selectSelectedDay,\n  (recordings, selectedDay) => {\n    if (!selectedDay) return [];\n    return recordings.filter((recording) =>\n      isDateOnDay(recording.date, selectedDay)\n    );\n  }\n);\n","import { Box, Stack } from '@chakra-ui/react';\nimport React, { useState, useEffect } from 'react';\nimport { useTypedDispatch, useTypedSelector } from '../../app/Store';\nimport { getNextMonth, getPreviousMonth } from '../../utils/DateTime/WeekDays';\nimport { loadMonthRecordigns } from './actions/CalendarActions';\nimport Calendar from './Calendar';\nimport DayRecordingsDisplay from './DayRecordingsDisplay/DayRecordingsDisplay';\nimport {\n  selectDayRecordingHeaders,\n  selectMonthRecordingObject,\n} from './store/CalendarSelectors';\n\nfunction CelendarWidget(): JSX.Element {\n  const dispatch = useTypedDispatch();\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const monthRecordingObject = useTypedSelector(selectMonthRecordingObject);\n\n  const dayRecordingHeaders = useTypedSelector(selectDayRecordingHeaders);\n\n  useEffect(() => {\n    // TODO - Dispatch is slowing down calendar animation - maybe move to web worker, or load this before openning calendar\n    dispatch(loadMonthRecordigns(currentDate));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentDate]);\n\n  return (\n    <Stack\n      direction={['column', 'column', 'column', 'row']}\n      spacing={5}\n      m={[2, 2, 3, 5]}\n      justify=\"center\"\n      align=\"stretch\"\n    >\n      <Box width={['100%', '100%', '100%', '58%']}>\n        <Calendar\n          date={currentDate}\n          onNextMonth={() => setCurrentDate(getNextMonth(currentDate))}\n          onPreviousMonth={() => setCurrentDate(getPreviousMonth(currentDate))}\n          recordingDays={monthRecordingObject}\n        />\n      </Box>\n\n      {dayRecordingHeaders.length !== 0 && (\n        <Box width={['100%', '100%', '100%', '42%']}>\n          <DayRecordingsDisplay dayRecordingHeaders={dayRecordingHeaders} />\n        </Box>\n      )}\n    </Stack>\n  );\n}\n\nexport default CelendarWidget;\n","import React from 'react';\nimport { Box } from '@chakra-ui/react';\nimport CelendarWidget from '../modules/Calendar/CalendarWIdget';\n\nfunction CelendarView(): JSX.Element {\n  return (\n    <Box centerContent boxSize=\"100%\">\n      <CelendarWidget />\n    </Box>\n  );\n}\n\nexport default CelendarView;\n","import React, { useCallback, useState } from 'react';\nimport _ from 'lodash';\n\nexport interface Validation {\n  readonly [id: string]: (\n    newValue: string,\n    formState: FormState\n  ) => null | string;\n}\n\nexport interface FormState {\n  readonly [id: string]: {\n    readonly error: string | null;\n    readonly value: string;\n  };\n}\n\nfunction useForm(\n  validation: Validation\n): readonly [(e: React.FormEvent<HTMLFormElement>) => void, FormState] {\n  const [formState, changeState] = useState<FormState>(\n    _.mapValues(validation, () => ({ error: null, value: '' }))\n  );\n\n  const validateFormFields = useCallback(\n    (currentformState: FormState) => {\n      const newFormState = Object.entries(validation).reduce<FormState>(\n        (result, [id, validationFunc]) => {\n          if (validationFunc) {\n            const { value } = currentformState[id];\n            const newValidationState = validationFunc(value, currentformState);\n            return { ...result, [id]: { error: newValidationState, value } };\n          }\n          return result;\n        },\n        {}\n      );\n      changeState({ ...currentformState, ...newFormState });\n    },\n    [validation]\n  );\n\n  const onChange = useCallback(\n    (e: React.FormEvent<HTMLFormElement>) => {\n      const inputElement = e.target as HTMLInputElement;\n\n      const { id, value } = inputElement;\n      validateFormFields({ ...formState, [id]: { ...formState[id], value } });\n    },\n    [formState, validateFormFields]\n  );\n\n  return [onChange, formState] as const;\n}\n\nexport default useForm;\n","import React from 'react';\nimport {\n  Button,\n  FormControl,\n  FormErrorMessage,\n  FormHelperText,\n  FormLabel,\n  Input,\n  VStack,\n} from '@chakra-ui/react';\n\nimport useForm, { FormState, Validation } from '../../modules/Forms/useForm';\n\nexport interface InputDeclation {\n  id: string;\n  label: string;\n  type?: string;\n  helperText?: string;\n  validation?: (newValue: string, formState: FormState) => string | null;\n}\n\ninterface BasicFormProps {\n  definition: ReadonlyArray<InputDeclation>;\n  submitText?: string;\n  onSubmit?: (state: FormState) => void;\n}\n\nfunction isNotNullAndEmpty(input: string | null): boolean {\n  if (input !== null && input !== '') return true;\n  return false;\n}\n\nfunction BasicForm({\n  definition,\n  submitText = 'Submit',\n  onSubmit = () => {},\n}: BasicFormProps): JSX.Element {\n  function getFormValidation(): Validation {\n    return definition.reduce<Validation>((validationObj, input) => {\n      const validationFunc = input.validation ?? (() => null);\n      return { ...validationObj, [input.id]: validationFunc };\n    }, {});\n  }\n\n  const [onChange, formState] = useForm(getFormValidation());\n\n  const inputs = definition.map((inputElement) => (\n    <FormControl\n      key={inputElement.id}\n      id={inputElement.id}\n      isInvalid={isNotNullAndEmpty(formState[inputElement.id].error)}\n    >\n      <FormLabel>{inputElement.label}</FormLabel>\n      <Input type={inputElement.type ?? 'text'} />\n      {inputElement.helperText && (\n        <FormHelperText>{inputElement.helperText}</FormHelperText>\n      )}\n      <FormErrorMessage>{formState[inputElement.id].error}</FormErrorMessage>\n    </FormControl>\n  ));\n\n  const submitButtonDisabled = Object.values(formState).reduce(\n    (current, field) => {\n      if (field.error === null || field.error !== '') return true;\n      return current;\n    },\n    false\n  );\n\n  return (\n    <form\n      onChange={onChange}\n      onSubmit={() => {\n        onSubmit(formState);\n      }}\n    >\n      <VStack spacing={7} align=\"stretch\">\n        {inputs}\n      </VStack>\n\n      <Button\n        width=\"100%\"\n        my={7}\n        type=\"submit\"\n        colorScheme=\"gray\"\n        disabled={submitButtonDisabled}\n      >\n        {submitText}\n      </Button>\n    </form>\n  );\n}\n\nexport default BasicForm;\n","import { createAsyncThunk } from '@reduxjs/toolkit';\nimport { AddToCypressWindow } from '../../../utils/testing/CypressUtils';\nimport authSession from '../AuthSession';\n\nexport const createNewUser = createAsyncThunk<\n  boolean,\n  { name: string; password: string }\n>('user/createNewUser', async ({ name, password }) => {\n  const result = await authSession.createNewUser(name, password);\n  if (result) return true;\n  return false;\n});\n\nAddToCypressWindow('createNewUser', createNewUser);\n\nexport const loginUser = createAsyncThunk<boolean, string>(\n  'user/loginUser',\n  async (password) => {\n    const result = await authSession.authenticate(password);\n    return result;\n  }\n);\n\nAddToCypressWindow('loginUser', loginUser);\n","import React from 'react';\nimport { useTypedDispatch } from '../../../app/Store';\nimport BasicForm from '../../../components/Form/BasicForm';\nimport { createNewUser } from '../actions/UserActions';\n\nfunction UserCreationForm(): JSX.Element {\n  const dispatch = useTypedDispatch();\n  return (\n    <BasicForm\n      onSubmit={(state) =>\n        dispatch(\n          createNewUser({\n            name: state.name.value,\n            password: state.password.value,\n          })\n        )\n      }\n      definition={[\n        {\n          id: 'name',\n          label: 'Your Name',\n          helperText: 'What should we call you?',\n          validation: (value) => {\n            if (value.length >= 5) return '';\n            return 'Your name is too short';\n          },\n        },\n        {\n          id: 'password',\n          label: 'Password',\n          type: 'password',\n          helperText:\n            'Your data is not stored in servers. If you lose your password your data is lost forever!',\n          validation: (value) => {\n            if (value.length >= 5) return '';\n            return 'Your password is too short';\n          },\n        },\n        {\n          id: 'passwordConfirmation',\n          label: 'Confirm Password',\n          type: 'password',\n          validation: (value, otherValues) => {\n            if (value === otherValues.password.value) return '';\n            return 'Passwords are different';\n          },\n        },\n      ]}\n    />\n  );\n}\n\nexport default UserCreationForm;\n","import React from 'react';\nimport { AsyncActionStatus } from './AsyncActionHelpers';\n\nexport interface RenderAsyncActionsProps {\n  actionStatus: AsyncActionStatus;\n  statusMap: { [key in AsyncActionStatus]?: React.ReactNode };\n}\n\nfunction RenderAsyncActions({\n  actionStatus,\n  statusMap,\n}: RenderAsyncActionsProps): JSX.Element {\n  const toRender = statusMap[actionStatus];\n  return <>{toRender}</>;\n}\n\nexport default RenderAsyncActions;\n","import { Center, Spinner } from '@chakra-ui/react';\nimport React from 'react';\n\nfunction LoadingSpinner(): JSX.Element {\n  return (\n    <Center>\n      <Spinner size=\"xl\" my={5} />\n    </Center>\n  );\n}\n\nexport default LoadingSpinner;\n","import React from 'react';\nimport { Container, Heading, SlideFade } from '@chakra-ui/react';\n\nimport { Navigate } from 'react-router-dom';\nimport UserCreationForm from '../modules/Authentication/UserCreation/UserCreationForm';\n\nimport { selectIsUserCreated } from '../modules/Authentication/state/UserSelectors';\nimport { useTypedSelector } from '../app/Store';\nimport { AsyncActionStatus } from '../utils/ReduxUtils/AsyncActionHelpers';\nimport RenderAsyncActions from '../utils/ReduxUtils/RenderAsyncActions';\nimport LoadingSpinner from '../components/Loading/LoadingSpinner';\n\nfunction CreateUserView(): JSX.Element {\n  const isUserCreated = useTypedSelector(selectIsUserCreated);\n\n  const failedErrorMessage = (\n    <SlideFade in offsetY=\"-50px\">\n      <Heading\n        py={10}\n        as=\"h6\"\n        size=\"xs\"\n        pb={5}\n        color=\"red.300\"\n        textAlign=\"center\"\n      >\n        Failed to create user :(. Please reload and try again.\n      </Heading>\n    </SlideFade>\n  );\n\n  return (\n    <Container maxW=\"container.sm\">\n      <RenderAsyncActions\n        actionStatus={isUserCreated}\n        statusMap={{\n          [AsyncActionStatus.NotStarted]: <UserCreationForm />,\n          [AsyncActionStatus.Completed]: <Navigate to=\"/\" replace />,\n          [AsyncActionStatus.Rejected]: failedErrorMessage,\n          [AsyncActionStatus.Pending]: <LoadingSpinner />,\n        }}\n      />\n    </Container>\n  );\n}\n\nexport default CreateUserView;\n","import React from 'react';\nimport { useTypedDispatch } from '../../../app/Store';\nimport BasicForm from '../../../components/Form/BasicForm';\nimport { loginUser } from '../actions/UserActions';\n\nfunction UserLoginForms(): JSX.Element {\n  const dispatch = useTypedDispatch();\n  return (\n    <BasicForm\n      onSubmit={(state) => dispatch(loginUser(state.password.value))}\n      definition={[\n        {\n          id: 'password',\n          label: 'Password',\n          type: 'password',\n          helperText:\n            'Your data is not stored in servers. If you lose your password your data is lost forever!',\n          validation: (value) => {\n            if (value.length >= 5) return '';\n            return 'Your password is too short';\n          },\n        },\n      ]}\n    />\n  );\n}\n\nexport default UserLoginForms;\n","import React from 'react';\nimport {\n  Center,\n  Container,\n  Heading,\n  Link as ChakraLink,\n  SlideFade,\n} from '@chakra-ui/react';\nimport { Link, Navigate } from 'react-router-dom';\nimport UserLoginForms from '../modules/Authentication/UserLogin/UserLoginForms';\nimport { useTypedSelector } from '../app/Store';\nimport RenderAsyncActions from '../utils/ReduxUtils/RenderAsyncActions';\nimport {\n  selectIsUserCreated,\n  selectIsUserLoggedIn,\n} from '../modules/Authentication/state/UserSelectors';\nimport { AsyncActionStatus } from '../utils/ReduxUtils/AsyncActionHelpers';\nimport LoadingSpinner from '../components/Loading/LoadingSpinner';\n\nfunction LoginView(): JSX.Element {\n  const isUsedloggedIn = useTypedSelector(selectIsUserLoggedIn);\n  const isUserCreated = useTypedSelector(selectIsUserCreated);\n\n  const withIncorrectPassword = (children: React.ReactNode) => (\n    <>\n      <SlideFade in offsetY=\"-50px\">\n        <Heading as=\"h6\" size=\"xs\" pb={5} color=\"red.300\">\n          Incorrect Password\n        </Heading>\n        {children}\n      </SlideFade>\n    </>\n  );\n\n  const userLoginForm = (\n    <RenderAsyncActions\n      actionStatus={isUsedloggedIn}\n      statusMap={{\n        [AsyncActionStatus.NotStarted]: <UserLoginForms />,\n        [AsyncActionStatus.Completed]: <Navigate to=\"/\" replace />,\n        [AsyncActionStatus.Rejected]: withIncorrectPassword(<UserLoginForms />),\n        [AsyncActionStatus.Pending]: <LoadingSpinner />,\n      }}\n    />\n  );\n\n  return (\n    <Container maxW=\"container.sm\" mt={5}>\n      {isUserCreated === AsyncActionStatus.Completed ? (\n        userLoginForm\n      ) : (\n        <Center textAlign=\"center\">\n          <Heading as=\"h2\" size=\"lg\">\n            Don&apos;t have a user?{'  '}\n            <ChakraLink as=\"h2\">\n              <Link to=\"/create\"> How about creating a new user?</Link>\n            </ChakraLink>\n          </Heading>\n        </Center>\n      )}\n    </Container>\n  );\n}\n\nexport default LoginView;\n","import React from 'react';\nimport { Icon, IconButton, useColorMode } from '@chakra-ui/react';\nimport { MdBrightness4 } from 'react-icons/md';\n\nfunction ColorModeButton(): JSX.Element {\n  const { toggleColorMode } = useColorMode();\n  return (\n    <IconButton\n      onClick={toggleColorMode}\n      colorScheme=\"gray\"\n      aria-label=\"ColorMode\"\n      icon={<Icon as={MdBrightness4} />}\n    />\n  );\n}\n\nexport default ColorModeButton;\n","import React from 'react';\nimport { Box } from '@chakra-ui/react';\nimport ColorModeButton from '../components/Header/ColorModeButton';\n\nfunction OptionsView(): JSX.Element {\n  return (\n    <Box centerContent boxSize=\"100%\">\n      <ColorModeButton />\n    </Box>\n  );\n}\n\nexport default OptionsView;\n","import { createSelector } from '@reduxjs/toolkit';\nimport { AppState } from '../../../app/Store';\nimport { MicAvailability } from './RecordTypes';\n\nexport const selectIsRecording = (state: AppState) => state.record.isRecording;\n\nexport const selectMicrophoneAvailability = (state: AppState) =>\n  state.record.isMicrophoneAvailable;\n\nexport const selectIsMicAvailable = createSelector(\n  selectMicrophoneAvailability,\n  (micAvailability) => micAvailability === MicAvailability.Available\n);\n","import React, { useEffect, useState } from 'react';\n\nimport { Heading } from '@chakra-ui/react';\nimport { formatSecondsToCounter } from '../../utils/DateTime/WeekDays';\n\nfunction RecordingCounter(): JSX.Element {\n  const [counter, setCounter] = useState(0);\n\n  useEffect(() => {\n    setTimeout(() => {\n      setCounter(counter + 1);\n    }, 1000);\n  }, [counter, setCounter]);\n\n  return (\n    <Heading p={1} as=\"h2\" size=\"3xl\" isTruncated>\n      {formatSecondsToCounter(counter)}\n    </Heading>\n  );\n}\n\nexport default RecordingCounter;\n","/* eslint-disable no-nested-ternary */\nimport React from 'react';\nimport { Box, Center, SlideFade, VisuallyHidden } from '@chakra-ui/react';\n\nimport { motion } from 'framer-motion';\nimport { recordButtonClicked } from './RecordActions';\nimport { useTypedDispatch, useTypedSelector } from '../../app/Store';\nimport {\n  selectIsMicAvailable,\n  selectIsRecording,\n} from './state/RecordSelectors';\nimport RecordingCounter from './RecordingCounter';\n\nfunction RecordPanel(): JSX.Element {\n  const dispatch = useTypedDispatch();\n  const isRecording = useTypedSelector(selectIsRecording);\n  const isMicAvailable = useTypedSelector(selectIsMicAvailable);\n  const redRecording = '#ff524d';\n  const recordingIcon = (\n    <button type=\"button\">\n      <VisuallyHidden>End Recording</VisuallyHidden>\n      <motion.svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        className=\"ionicon\"\n        viewBox=\"0 0 512 512\"\n        width=\"100%\"\n        role=\"presentation\"\n      >\n        <motion.path\n          d=\"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z\"\n          fill=\"none\"\n          stroke={redRecording}\n          strokeMiterlimit=\"10\"\n          strokeWidth=\"32\"\n          strokeLinecap=\"round\"\n        />\n        <motion.circle\n          initial={{ opacity: 0, pathLength: 0, r: 0 }}\n          animate={{ pathLength: 1, opacity: 1, r: 144 }}\n          transition={{ ease: 'easeInOut', duration: 0.5 }}\n          fill={redRecording}\n          cx=\"256\"\n          cy=\"256\"\n          r=\"144\"\n        />\n      </motion.svg>\n    </button>\n  );\n\n  const micNotAvailableIcon = (\n    <motion.svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"100%\"\n      fill=\"none\"\n      viewBox=\"0 0 512 512\"\n      stroke=\"currentColor\"\n    >\n      <title>microphone not authorized or available</title>\n      <motion.path\n        initial={{ opacity: 0, pathLength: 0 }}\n        animate={{ pathLength: 1, opacity: 1 }}\n        transition={{ ease: 'easeInOut', duration: 1.5 }}\n        strokeLinecap=\"round\"\n        strokeMiterlimit=\"10\"\n        strokeWidth=\"32\"\n        stroke={redRecording}\n        d=\"M432 400L96 64\"\n      />\n      <motion.path\n        initial={{ opacity: 0, pathLength: 0 }}\n        animate={{ pathLength: 1, opacity: 1 }}\n        transition={{ ease: 'easeInOut', duration: 1.5 }}\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        fill=\"currentColor\"\n        stroke={redRecording}\n        d=\"M400 240v-31.55c0-8.61-6.62-16-15.23-16.43A16 16 0 00368 208v32a111.58 111.58 0 01-2.45 23.31 4.05 4.05 0 001.07 3.69l21.82 21.81a2 2 0 003.29-.72A143.27 143.27 0 00400 240zM256 352a112.36 112.36 0 01-112-112v-31.55c0-8.61-6.62-16-15.23-16.43A16 16 0 00112 208v32c0 74 56.1 135.12 128 143.11V432h-47.55c-8.61 0-16 6.62-16.43 15.23A16 16 0 00192 464h127.55c8.61 0 16-6.62 16.43-15.23A16 16 0 00320 432h-48v-48.89a143.08 143.08 0 0052-16.22 4 4 0 00.91-6.35L307 342.63a4 4 0 00-4.51-.78A110.78 110.78 0 01256 352zM256 80a47.18 47.18 0 0148 48v74.72a4 4 0 001.17 2.82L332.59 233a2 2 0 003.41-1.42V128.91C336 85 301 48.6 257.14 48a79.66 79.66 0 00-68.47 36.57 4 4 0 00.54 5l19.54 19.54a2 2 0 003.25-.63A47.44 47.44 0 01256 80z\"\n      />\n      <motion.path\n        initial={{ opacity: 0, pathLength: 0 }}\n        animate={{ pathLength: 1, opacity: 1 }}\n        transition={{ ease: 'easeInOut', duration: 1.5 }}\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        fill=\"currentColor\"\n        stroke={redRecording}\n        d=\"M207.27 242.9L179.41 215a2 2 0 00-3.41 1.42V239a80.89 80.89 0 0023.45 56.9 78.55 78.55 0 0077.8 21.19 2 2 0 00.86-3.35l-24.91-24.91a4.08 4.08 0 00-2.42-1.15c-21.65-2.52-39.48-20.44-42.37-42.43a4 4 0 00-1.14-2.35z\"\n      />\n    </motion.svg>\n  );\n\n  const micAvailableIcon = (\n    <button type=\"button\">\n      <VisuallyHidden>Start Recording</VisuallyHidden>\n      <motion.svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 512 512\"\n        stroke=\"currentColor\"\n        width=\"100%\"\n        role=\"presentation\"\n      >\n        <motion.path\n          initial={{ opacity: 0, pathLength: 0 }}\n          animate={{ pathLength: 1, opacity: 1 }}\n          transition={{ ease: 'easeInOut', duration: 1.5 }}\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          strokeWidth=\"32\"\n          d=\"M192 448h128M384 208v32c0 70.4-57.6 128-128 128h0c-70.4 0-128-57.6-128-128v-32M256 368v80\"\n        />\n        <motion.path\n          initial={{ opacity: 0, pathLength: 0 }}\n          animate={{ pathLength: 1, opacity: 1 }}\n          transition={{ ease: 'easeInOut', duration: 1.5 }}\n          d=\"M256 64a63.68 63.68 0 00-64 64v111c0 35.2 29 65 64 65s64-29 64-65V128c0-36-28-64-64-64z\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          strokeWidth=\"32\"\n        />\n      </motion.svg>\n    </button>\n  );\n\n  const icons = (\n    <>\n      {isRecording\n        ? recordingIcon\n        : isMicAvailable\n        ? micAvailableIcon\n        : micNotAvailableIcon}\n    </>\n  );\n\n  return (\n    <>\n      <Center m={10} width={['80%', '80%', '70%', '50%', '30%']}>\n        <Box onClick={() => dispatch(recordButtonClicked())}>{icons}</Box>\n      </Center>\n\n      <Center>\n        <SlideFade in={isRecording} offsetY=\"20px\">\n          {isRecording && <RecordingCounter />}\n        </SlideFade>\n      </Center>\n    </>\n  );\n}\n\nexport default RecordPanel;\n","import React, { useEffect } from 'react';\nimport { Container, Flex, Spacer } from '@chakra-ui/react';\n\nimport RecordPanel from '../modules/Recording/RecordPanel';\nimport { useTypedDispatch } from '../app/Store';\nimport { askForMicrophonePermission } from '../modules/Recording/RecordActions';\n\nfunction RecordView(): JSX.Element {\n  const dispatch = useTypedDispatch();\n\n  useEffect(() => {\n    dispatch(askForMicrophonePermission());\n  }, [dispatch]);\n\n  return (\n    <Container overflow=\"hidden\" maxW=\"container.xl\" centerContent>\n      <RecordPanel />\n    </Container>\n  );\n}\n\nexport default RecordView;\n","import {\n  changedAudioTime,\n  loadAudioDuration,\n  stopPlayingRecord,\n} from '../../modules/Playback/actions/PlaybackActions';\nimport audio from '../../modules/Playback/AudioController/AudioController';\n\ntype ActionFunction = (dispatch: (v: unknown) => Promise<void>) => void;\n\nconst OnPageLoadActions: Array<ActionFunction> = [\n  (dispatch): void => {\n    audio.onAudioDurantionChange(() => {\n      dispatch(loadAudioDuration());\n    });\n  },\n  (dispatch): void => {\n    audio.onCurrentTimeUpdate((currentTime) => {\n      dispatch(changedAudioTime(currentTime));\n    });\n  },\n  (dispatch): void => {\n    audio.onAudioPlaybackEnd(() => {\n      dispatch(stopPlayingRecord());\n    });\n  },\n];\n\nexport default OnPageLoadActions;\n","import { useEffect } from 'react';\nimport { useTypedDispatch } from '../Store';\nimport { loadInitialUserState } from './LoadInitialStateActions';\nimport OnPageLoadActions from './OnPageLoadActions';\n\nfunction LoadInitialState(): void {\n  const dispatch = useTypedDispatch();\n\n  useEffect(() => {\n    dispatch(loadInitialUserState());\n\n    OnPageLoadActions.forEach((func) => func(dispatch));\n  }, [dispatch]);\n}\n\nexport default LoadInitialState;\n","import { Skeleton, Stack } from '@chakra-ui/react';\nimport React from 'react';\n\nfunction PageSkeleton(): JSX.Element {\n  return (\n    <Stack spacing={5}>\n      <Skeleton height=\"50px\" />\n      <Skeleton height=\"50px\" />\n      <Skeleton height=\"50px\" />\n    </Stack>\n  );\n}\n\nexport default PageSkeleton;\n","import { Container } from '@chakra-ui/react';\nimport React from 'react';\nimport PageSkeleton from '../../components/Loading/PageSkeleton';\nimport { selectIsLoadingInitialState } from '../../modules/Authentication/state/UserSelectors';\nimport { useTypedSelector } from '../Store';\n\nexport default function WithInitialPageSkeleton({\n  children,\n}: {\n  children: React.ReactNode;\n}): JSX.Element {\n  const appIsLoading = useTypedSelector(selectIsLoadingInitialState);\n\n  return (\n    <>\n      {appIsLoading ? (\n        <Container maxW=\"container.sm\" mt={5}>\n          <PageSkeleton />\n        </Container>\n      ) : (\n        children\n      )}\n    </>\n  );\n}\n","import { Box, Flex, Spacer } from '@chakra-ui/react';\nimport React from 'react';\n\nimport { Routes, Route } from 'react-router-dom';\nimport AppHeader from '../components/Header/AppHeader';\nimport { OnlyLoggedIn } from '../modules/Authentication/OnlyLoggedIn';\nimport PlaybackPanel from '../modules/Playback/PlaybackPanel';\nimport CalendarView from '../views/CalendarView';\nimport CreateUserView from '../views/CreateUserView';\nimport LoginView from '../views/LoginView';\nimport OptionsView from '../views/OptionsView';\nimport RecordView from '../views/RecordView';\nimport LoadInitialState from './LoadInitialState/LoadInitialStateHook';\nimport WithInitialPageSkeleton from './LoadInitialState/WithInitialPageSkeleton';\n\nfunction App(): JSX.Element {\n  LoadInitialState();\n\n  const navBarHeight = ['10vh', '10vh', '7vh'];\n\n  const contentHeight = navBarHeight\n    .map((value) => 100 - Number(value.replace('vh', '')))\n    .map((value) => `${String(value)}vh`);\n\n  const WithPlaybackLayout = ({ children }: { children: React.ReactNode }) => (\n    <Flex height={contentHeight} direction=\"column\">\n      <Box overflow=\"auto\">{children}</Box>\n      <Spacer />\n      <Box>\n        <PlaybackPanel />\n      </Box>\n    </Flex>\n  );\n\n  const recordView = (\n    <WithInitialPageSkeleton>\n      <OnlyLoggedIn>\n        <WithPlaybackLayout>\n          <RecordView />\n        </WithPlaybackLayout>\n      </OnlyLoggedIn>\n    </WithInitialPageSkeleton>\n  );\n\n  const otionsView = (\n    <WithInitialPageSkeleton>\n      <OnlyLoggedIn>\n        <WithPlaybackLayout>\n          <OptionsView />\n        </WithPlaybackLayout>\n      </OnlyLoggedIn>\n    </WithInitialPageSkeleton>\n  );\n\n  const calendarView = (\n    <WithPlaybackLayout>\n      <CalendarView />\n    </WithPlaybackLayout>\n  );\n\n  const loginView = (\n    <WithInitialPageSkeleton>\n      <Box height={contentHeight}>\n        <LoginView />\n      </Box>\n    </WithInitialPageSkeleton>\n  );\n\n  const createUserView = (\n    <WithInitialPageSkeleton>\n      <Box height={contentHeight}>\n        <CreateUserView />\n      </Box>\n    </WithInitialPageSkeleton>\n  );\n\n  return (\n    <>\n      <Box as=\"nav\" height={navBarHeight}>\n        <OnlyLoggedIn redirect={false}>\n          <AppHeader />\n        </OnlyLoggedIn>\n      </Box>\n\n      <Routes>\n        <Route path=\"/*\" element={recordView} />\n        <Route path=\"calendar\" element={calendarView} />\n        <Route path=\"login\" element={loginView} />\n        <Route path=\"create\" element={createUserView} />\n        <Route path=\"options\" element={otionsView} />\n      </Routes>\n    </>\n  );\n}\n\nexport default App;\n","/* eslint-disable no-param-reassign */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { ThemeConfig } from '@chakra-ui/react';\n\nconst themeConfig: ThemeConfig = {\n  initialColorMode: 'dark',\n  useSystemColorMode: false,\n};\n\nexport default themeConfig;\n","import { extendTheme } from '@chakra-ui/react';\nimport themeConfig from './config';\n\nconst AppTheme = extendTheme({ config: themeConfig });\n\nexport default AppTheme;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ColorModeScript } from '@chakra-ui/react';\nimport App from './app/App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport reportWebVitals from './reportWebVitals';\n\nimport AppTheme from './theme/theme';\nimport WrapWithProviders from './app/Providers';\n\nReactDOM.render(\n  <React.StrictMode>\n    <ColorModeScript initialColorMode={AppTheme.config.initialColorMode} />\n    {WrapWithProviders(<App />)}\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.unregister();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import { ChakraProvider } from '@chakra-ui/react';\nimport React from 'react';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport AppTheme from '../theme/theme';\nimport mainStore from './Store';\n\nexport default function WrapWithProviders(\n  children: JSX.Element,\n  store = mainStore\n): JSX.Element {\n  return (\n    <Provider store={store}>\n      <Router>\n        <ChakraProvider theme={AppTheme}>{children}</ChakraProvider>\n      </Router>\n    </Provider>\n  );\n}\n"],"sourceRoot":""}